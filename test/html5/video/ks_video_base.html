<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=3.0">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />

  <style type="text/css">
    .video_top {
      position: relative;
      width: 150px;
      height: 200px;
      left: 180px;
      top: -220px;
      background: #0C0;
      z-index: 997;
    }
  </style>
  <script>
  // function requestDeviceOrientation(callback) {
  //     if (window.DeviceOrientationEvent == null) {
  //         callback(new Error("DeviceOrientation is not supported."));
  //     } else if (DeviceOrientationEvent.requestPermission) {
  //         DeviceOrientationEvent.requestPermission().then(function(state) {
  //             if (state == "granted") {
  //                 callback(null);
  //             } else callback(new Error("Permission denied by user"));
  //         }, function(err) {
  //             callback(err);
  //         });
  //     } else { // no need for permission
  //         callback(null);
  //     }
  // }
  // function handleOrientation(event) {
  //   var absolute = event.absolute;
  //   var alpha    = event.alpha;
  //   var beta     = event.beta;
  //   var gamma    = event.gamma;
  //   console.log("gqg5: absolute=" + absolute + "; beta=" + beta);
  // }
  // requestDeviceOrientation(handleOrientation);
  // if (window.DeviceOrientationEvent) {
  //   console.log("supported");
  // } else {
  //   console.log("not supported");
  // }

  // window.addEventListener("deviceorientation", handleOrientation, true);

    // window.addEventListener("deviceorientation", function(event) {
    // // process event.alpha, event.beta and event.gamma
    //   console.log("gqg5: window.addEventListener deviceorientation");
    // }, true);
    const load = () => {
      console.log("load event detected!");
      document.getElementById('idJsUa').innerHTML = navigator.userAgent;
    }
    window.onload = load;

  </script>
  <!--
    https://w1-pro.kskwai.com/kos/nlav11066/eve2022/pickNumber/zhuhuichang_inner_brand_video_1_v.mp4
    http://ali-uget.video.yximgs.com/mediacloud/uget/video/xPUX_pn0gLvcoSyZzDmsPoWqMCCCw8Jc0XjbdhUMjHE.mp4
    http://172.17.202.11:8080/video/beiwa_iqiyi_05.mp4

    http://ali-uget.video.yximgs.com/mediacloud/uget/video/xPUX_pn0gLvcoSyZzDmsPoWqMCCCw8Jc0XjbdhUMjHE.mp4
    http://ali-uget.video.yximgs.com/mediacloud/uget/video/8U1EN4X7L1eBv5I2iGsTkTRBjiRaiNLN92Y0Ggyxlew.mp4

    controlslist="nofullscreen"

    autoplay=""
  -->
</head>

<body>

  <div id='container'>

    <video id="ovideo" useksplayer="video"  controls src="https://ali-uget.video.yximgs.com/mediacloud/uget/video/8U1EN4X7L1eBv5I2iGsTkTRBjiRaiNLN92Y0Ggyxlew.mp4" style="width: 100%; height: 300px;"></video>
  
  </div>
<!--
  muted=""
  controls
  poster="/img/test.jpg"
-->
  <script>
    ovideo.onerror = function (e) {
      console.log("gqg5: ovideo.onerror 000000000000000000000000000000");
      let s = "";
      let err = ovideo.error;
      console.log("gqg5: ovideo.onerror ovideo.error=" + ovideo.error);

      switch (err.code) {
        case MediaError.MEDIA_ERR_ABORTED:
          s += "The user canceled the audio.";
          break;
        case MediaError.MEDIA_ERR_NETWORK:
          s += "A network error occurred while fetching the audio.";
          break;
        case MediaError.MEDIA_ERR_DECODE:
          s += "An error occurred while decoding the audio.";
          break;
        case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:
          s += "The audio is missing or is in a format not supported by your browser.";
          break;
        default:
          s += "An unknown error occurred.";
          break;
      }

      let message = err.message;

      if (message && message.length) {
        s += " " + message;
      }
      console.log("gqg5: ovideo.onerror s=" + s);
      //ovideo.src = "https://txmov2.a.yximgs.com/bs2/newWatermark/MzU4MTk4OTQ2NjA_zh_3.mp4?a=2222222";
    }

    ovideo.addEventListener("durationchange", function (e) {
      console.log("gqg3: durationchange ovideo.duration=" + ovideo.duration);
    });
    ovideo.addEventListener("playing", function (e) {
      console.log("gqg6: addEventListener　playing ovideo.duration=" + ovideo.duration);
    });
    ovideo.addEventListener("waiting", function (e) {
      console.log("gqg6: addEventListener　waiting ovideo.duration=" + ovideo.duration);
    });

    ovideo.addEventListener("loadstart", function (e) {
      console.log("gqg3: addEventListener　loadstart");
    });
    ovideo.addEventListener("load", function (e) {
      console.log("gqg3: addEventListener　load....");
    });
    ovideo.addEventListener("ended", function (e) {
      console.log("gqg3: ended=true");
    });
    ovideo.addEventListener("abended", function (e) {
      console.log("gqg3: addEventListener abended=true");
    });
    ovideo.onabended = function () {
      console.log("gqg3: onabended=true  ================================================");
    }
    ovideo.addEventListener("firstframe", function (e) {
      console.log("gqg3: addEventListener firstframe=true");
    });
    ovideo.onfirstframe = function () {
      console.log("gqg3: onfirstframe=true");
    }

    ovideo.onplaying = function () {
      console.log("gqg3: ovideo.onplaying ovideo.duration=" + ovideo.duration);
    }

    function playOrPause() {
      if (ovideo.paused) {
        console.log("gqg3: play() begin...");
        ovideo.play();
        console.log("gqg3: play() end");
      } else {
        console.log("gqg3: pause() begin...");
        ovideo.pause();
        console.log("gqg3: pause() ended");
      }
      
    }

    function enterFullscreen() {
      ovideo.requestFullscreen();
    }

    function switchVideoSrc() {
      ovideo.src = "http://ali-uget.video.yximgs.com/mediacloud/uget/video/xPUX_pn0gLvcoSyZzDmsPoWqMCCCw8Jc0XjbdhUMjHE.mp4";
      ovideo.play(); // <-- This is asynchronous!
      ovideo.pause();
      ovideo.src = "http://ali-uget.video.yximgs.com/mediacloud/uget/video/xPUX_pn0gLvcoSyZzDmsPoWqMCCCw8Jc0XjbdhUMjHE.mp4";
      console.log("switchVideoSrc finish!")
      //ovideo.src = "";
      //ovideo.src = null;
      // ovideo.src = "about:blank"
      // ovideo.releaseplayer();
      // setTimeout(function() {
      //   ovideo.src = "http://ali-uget.video.yximgs.com/mediacloud/uget/video/xPUX_pn0gLvcoSyZzDmsPoWqMCCCw8Jc0XjbdhUMjHE.mp4";
      // }, 1000*5);
    }
  </script>
  <br /><br />

  <button onclick="playOrPause()">播放或暂停</button>
  <br /><br />
  <button onclick="enterFullscreen()">进入全屏</button>
  <br /><br />
  <button onclick="location.reload()">重新加载</button>
  <br /><br />
  <button onclick="switchVideoSrc()">更换Video src</button>
  <br /><br />
  <a href="http://yimingapp.cn/test">yimingapp.cn/test</a>
  <div id="idJsUa" style="background-color: blue;">
    
  </div>

  <button onclick="location.reload()">reload</button>
<br /><br />
</body>

</html>