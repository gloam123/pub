function SiNAh5STOCk(X,w){var N=function(ak){return Object.prototype.toString.call(ak)==="[object Array]"};var ab=function(ak){return(/^#[0-9a-fA-F]{6}$/).test(ak)};function T(){this.evtObj={}}T.prototype.al=function(ak,am,al){if(al&&this.evtObj[ak]){return}!this.evtObj[ak]&&(this.evtObj[ak]=[]);this.evtObj[ak].push(am)};T.prototype.rl=function(al,an){var ak=this.evtObj[al];if(N(ak)){for(var am=ak.length;am--;){(ak[am]==an)&&ak.splice(am,1)}}};T.prototype.re=function(am,ao){var ak=this.evtObj[am];if(N(ak)){for(var an=0,al=ak.length;an<al;an++){(typeof(ak[an])==="function")&&ak[an](am,ao)}}};var V={pa:function(ao,am,al,ap){var ak=[],ar=(am-ao)/(ap-1);for(var aq,an=0;an<ap;an++){aq=(am-ar*an-al)/al;ak[ak.length]=aq}return ak}};var D={dd:function(ak){return new Date(ak.getFullYear(),ak.getMonth(),ak.getDate())},stbd:function(al,ak){if(!al||!ak){return false}return(al.getFullYear()==ak.getFullYear())?((al.getMonth()==ak.getMonth())?(al.getDate()==ak.getDate()):false):false},stbs:function(al,an,ak,am){if(!al||!an||!(ak+1)||!am){return false}return(al.getFullYear()==an)?((al.getMonth()==ak)?(al.getDate()==am):false):false},stbds:function(am,an,al){!al&&(al="-");var ak=an.split(al);return this.stbs(am,Number(ak[0]),Number(ak[1])-1,Number(ak[2]))},ds:function(an,al){!al&&(al="-");var ak=[an.getFullYear()];var ao=an.getMonth()+1;ak[ak.length]=ao<10?("0"+ao):ao;var am=an.getDate();ak[ak.length]=am<10?("0"+am):am;return ak.join(al)},sd:function(am){var al=am.split("-");var ao=al[0],ak=al[1]-1,an=al[2];return new Date(ao,ak,an)},gw:function(ap,al){var an=604800000;var ao=259200000;var am=(ap.getTime()-ao)/an,ak=(al.getTime()-ao)/an;return(Math.floor(am)==Math.floor(ak))},gm:function(al,ak){return al.getFullYear()==ak.getFullYear()?(al.getMonth()==ak.getMonth()):false},nw:function(ak){switch(ak){case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"日";default:return""}}};var A={addHandler:function(am,al,ak){if(!am){return}if(am.addEventListener){am.addEventListener(al,ak,false)}else{if(am.attachEvent){am.attachEvent("on"+al,ak)}else{am["on"+al]=ak}}},removeHandler:function(am,al,ak){if(!am){return}if(am.removeEventListener){am.removeEventListener(al,ak,false)}else{if(am.detachEvent){am.detachEvent("on"+al,ak)}else{am["on"+al]=null}}},getEvent:function(ak){return ak?ak:window.event},getTarget:function(ak){!ak&&(ak=this.getEvent());return ak?(ak.target||ak.srcElement):null},preventDefault:function(ak){!ak&&(ak=this.getEvent());if(!ak){return false}ak.preventDefault?ak.preventDefault():(ak.returnValue=false)},stopPropagation:function(ak){!ak&&(ak=this.getEvent());if(!ak){return false}ak.stopPropagation?ak.stopPropagation():(ak.cancelBubble=true)},getRelatedTarget:function(ak){!ak&&(ak=this.getEvent());if(ak.relatedTarget){return ak.relatedTarget}if(ak.toElement){return ak.toElement}if(ak.fromElement){return ak.fromElement}return null},getWheelDelta:function(ak){!ak&&(ak=this.getEvent());if(!ak){return 0}if(ak.wheelDelta){return((client.engine.opera&&client.engine.opera<9.5)?-ak.wheelDelta:ak.wheelDelta)}return -ak.detail*40}};var g={pp:function(an,am,ak,al){if(isNaN(an)||an<=am){return al}if(an>=ak){return 1}return Math.max((al*(1-(an-am)/(ak-am))),1)},vp:function(am,ak,al){return(isNaN(am)||am<=0)?(al-1):(al*(1-am/ak))}};var c={pageX:function(ak){return ak.offsetParent?ak.offsetLeft+this.pageX(ak.offsetParent):ak.offsetLeft},pageY:function(ak){return ak.offsetParent?ak.offsetTop+this.pageY(ak.offsetParent):ak.offsetTop},parentX:function(ak){return ak.parentNode==ak.offsetParent?ak.offsetLeft:this.pageX(ak)-this.pageX(ak.parentNode)},parentY:function(ak){return ak.parentNode==ak.offsetParent?ak.offsetTop:this.pageY(ak)-this.pageY(ak.parentNode)}};var ai={trim:function(ak){return(ak.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,""))},ps:function(ak,al){ak=Number(ak);if(isNaN(ak)||ak<=0){return"-"}else{if(ak<100000){return ak.toFixed(al)}else{if(ak<1000000){return(ak/10000).toFixed(al)+"万"}else{if(ak<10000000){return(ak/1000000).toFixed(al)+"百万"}else{if(ak<100000000){return(ak/10000000).toFixed(al)+"千万"}else{return(ak/100000000).toFixed(al)+"亿"}}}}}},vs:function(al,ak){var an,am="";if(al>1000000000000){an=(al/1000000000000).toFixed(0);am="万亿"}else{if(al>100000000){an=(al/100000000).toFixed(2);am="亿"}else{if(al>100000){an=(al/10000).toFixed(2);am="万"}else{if(al>=1){an=(al).toFixed(0)}else{an="-"}}}}return ak?(an+am):an},zp:function(ak){ak=String(ak);if(ak.length<2){return("0"+ak)}return ak}};var J={s0:function(ak){ak=parseInt(Number(ak));if(ak<0){return""}if(ak<10){return"0"+String(ak)}return String(ak)},tIWS:function(an,al){var ak=[];for(var am=an;am<=al;am++){ak.push(this.s0(am/60)+":"+this.s0(am%60))}return ak},gtr:function(an){var av=[];for(var ao,aq,ak,ap,am,au,at,ar=0,al=an.length;ar<al;ar++){ak=an[ar][0];ap=an[ar][1];am=Number(ak.split(":")[0])*60+Number(ak.split(":")[1]);au=Number(ap.split(":")[0])*60+Number(ap.split(":")[1]);at=this.tIWS(am,au);av=av.concat(at)}return av},tradingA:[],gta:function(){if(!this.tradingA.length){this.tradingA=this.gtr([["9:30","11:30"],["13:00","15:00"]])}return this.tradingA},tradingUs:[],gtus:function(){if(!this.tradingUs.length){this.tradingUs=this.gtr([["9:30","16:00"]])}return this.tradingUs},gata:function(al){var ak;switch(al){case"US":ak=this.gtus();break;default:case"CN":ak=this.gta();break}return ak},ist:function(ak,al){ak=ak.toUpperCase();return this.gata(ak).indexOf(al)>=0},gltbt:function(ak,at,ap,an){var ao=[];var ar=this.gata(an);var aq=ar.length;for(var am=0,al=ak*aq;am<al;am++){ao.push({time:ar[am%aq],price:0,percent:0,avg_price:0,volume:0});if(!ap){ao[am].price=ao[am].avg_price=at}}ao[0].price=ao[0].avg_price=ao[0].prevclose=at;ao[0].volume=ao[0].totalVolume=ao[0].totalAmount=0;return ao},azft:function(an,am){if(!an){return an}var ak=this.gata(am);for(var ao=0,al=an.length;ao<al;ao++){an[ao].time=ak[ao]}an[0].date.setHours(0);return an},c2b:function(al){al=al.replace(" ","+");var ak="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(al);return ak>=0?ak:0},db:function(an){if(!an){return[]}var ap=[];for(var ar,aq,al=0,am=0,ao=0,ak=an.length;ao<ak;ao++){ar=this.c2b(an.charAt(ao));aq=(am&6)?((am&7)^7):5;al|=ar>>(5-aq)<<((am^7)-aq);(al==64767&&ar==63)&&(al=65535);if(am>25){am-=32;ap[ap.length]=al;al=0}al|=(ar&((1<<(5-aq))-1))<<((am|7)+4+aq);am+=6}return ap},fB:function(an,ak,ap){var aq=[];var au=this.gata(ap),at=au.length*3;var am=0,al=0,av;for(var ar=0,ao=0;ao<at;ao+=3){ar=Math.floor(ao/3);if(ak){aq[aq.length]={time:au[ar],price:an[ao+1]/1000}}else{aq[aq.length]={time:au[ar],avg_price:an[ao]/1000,price:an[ao+1]/1000,volume:an[ao+2]/100};if(aq[ar].volume>0){al+=aq[ar].volume}if(aq[ar].avg_price>0){av=aq[ar].avg_price}}}if(aq[0].price<0){aq[0].price=aq[0].avg_price=al=am=0}if(!ak){aq[0].totalVolume=al;aq[0].totalAmount=al*av}return aq}};var ah={mw:function(aA,ar,av,al,aw,aG){if(typeof al!=="number"){al=0}var ay=aA.length,aE=aA[0];if(al>0){aE.volume/=al}var ak=[],at=[];if(ay==1){ak[0]={open:ar.open,high:ar.high,low:ar.low,close:ar.price,volume:ar.totalVolume,date:D.dd(ar.date)};at[0]={open:ar.open,high:ar.high,low:ar.low,close:ar.price,volume:ar.totalVolume,date:D.dd(ar.date)}}else{var aH=aE.open,aD=aE.high,az=aE.low,an=aE.close,au=aE.volume,aq=aE.date,aC=aE.open,ax=aE.high,ap=aE.low,aF=aE.close,ao=aE.volume,am=aE.date;for(var aB=1;aB<ay;aB++){aE=aA[aB];if(al>0){aE.volume/=al}if(D.gw(aA[aB-1].date,aE.date)){if(aE.high>aD){aD=aE.high}if(aE.low<az){az=aE.low}an=aE.close;au+=aE.volume;aq=aE.date}else{ak[ak.length]={open:aH,high:aD,low:az,close:an,volume:au,date:aq};aH=aE.open;aD=aE.high;az=aE.low;an=aE.close;au=aE.volume;aq=aE.date}if(D.gm(aA[aB-1].date,aE.date)){if(aE.high>ax){ax=aE.high}if(aE.low<ap){ap=aE.low}aF=aE.close;ao+=aE.volume;am=aE.date}else{at[at.length]={open:aC,high:ax,low:ap,close:aF,volume:ao,date:am};aC=aE.open;ax=aE.high;ap=aE.low;aF=aE.close;ao=aE.volume;am=aE.date}if(aB==ay-1){ak[ak.length]={open:aH,high:aD,low:az,close:an,volume:au,date:aq};at[at.length]={open:aC,high:ax,low:ap,close:aF,volume:ao,date:am}}}}ak[0].prevclose=av;at[0].prevclose=av;return[ak,at]},nc:function(ak,an,al,ao){if(!ak||ak.length<1){return}var am=ak[ak.length-1];if(isNaN(am.volume)||am.volume<1){ak.length--}switch(al){case"d":break;case"w":if(D.gw(ak[ak.length-1].date,an.date)){return}break;case"m":if(D.gm(ak[ak.length-1].date,an.date)){return}break;default:return}ak[ak.length]={open:ao?an.prevclose:an.open,high:ao?an.prevclose:an.high,low:ao?an.prevclose:an.low,close:ao?an.prevclose:an.price,volume:an.totalVolume,date:D.dd(an.date),day:String(an.today).split("-").join("/")}},pd:function(ak,am){var ao=ak.length,aq=ak[0],at=aq.prevclose;if(isNaN(at)||at<=0){at=aq.open}for(var an=0;an<ao;an++){aq=ak[an];aq.percent=(aq.close-at)/at;at=aq.close;if(am){continue}if(!aq.day){var al=aq.date;var ap=ai.zp(al.getMonth()+1),ar=ai.zp(al.getDate());aq.day=[al.getFullYear(),ap,ar].join("/")}else{aq.time=String(aq.day).substr(11,5);aq.day=String(aq.day).substr(0,10);aq.date=D.sd(aq.day);aq.day=aq.day.split("-").join("/")}}},ms:function(an,al,ao,am,ak){return Math.max(1,Math.ceil(((an-ao)*60+al-am)/ak))},spk:function(am,av,ao,an){if(am==av){return true}var ap=am.split(":");var ax=Number(ap[0]),al=Number(ap[1]);ap=av.split(":");var aq=Number(ap[0]),ar=Number(ap[1]);if(ax>aq||(ax==aq&&al>=ar)){return true}if(an==60){if((am=="10:30"||am=="11:30"||am=="14:00"||am=="15:00")&&(ar!=al)){return false}else{return true}}else{ap=ao.split(":");var at=Number(ap[0]),ak=Number(ap[1]);var aw=this.ms(ax,al,at,ak,an);var au=this.ms(aq,ar,at,ak,an);return aw==au}},yd:function(an){var ak=[];var al=an[an.length-1].date.getFullYear();for(var am=an.length;am--;){if(an[am].date.getFullYear()!=al){break}ak[ak.length]=an[am]}ak.reverse();ak[0].prevclose=an[am]?an[am].close:ak[0].close;return ak},rd:function(ao,an){var ak=[];var al=D.dd(an);al.setFullYear(al.getFullYear()-5);for(var am=ao.length;am--;){if(ao[am].date<al){break}ak[ak.length]=ao[am]}ak.reverse();ak[0].prevclose=ao[am]?ao[am].close:ak[0].close;return ak},ama:function(au,ao){if(!au||au.length<1){return}var an=[],av=[];for(var aq,ax,aw,at,ak,am=au.length,ap,al=0,ar=ao.length;al<ar;al++){an[al]=0;aq="ma_p"+al;aw=ao[al];for(ap=0;ap<am;ap++){at=au[ap];an[al]+=Number(at.close);if(ap>=aw-1){at[aq]=an[al]/aw;ak=au[ap-aw+1];an[al]-=ak.close}else{at[aq]=an[al]/(ap+1)}}}},uma:function(ak,ao){if(!ak){return}var am=ak.length,aq=ao.length;var an=[],at=[],ap,al,ar;for(al=0;al<aq;al++){an[al]=0;ap=Math.max(0,am-ao[al]);for(;ap<am;ap++){ar=ak[ap];an[al]+=Number(ar.close)}}ar=ak[am-1];for(al=0;al<aq;al++){ap=Math.min(am,ao[al]);ar["ma_p"+al]=an[al]/ap}}};var O={getUrlParams:function(){var ar=location.search.substring(1),al=ar.split("&"),ao={};for(var aq,ap,am,an=0,ak=al.length;an<ak;an++){aq=al[an].indexOf("=");if(aq!=-1){ap=al[an].substring(0,aq);am=al[an].substring(aq+1);ao[ap]=am}}return ao}};var aj={info:function(){var ak=navigator.userAgent,al=navigator.appVersion;return{trident:ak.indexOf("Trident")>-1,presto:ak.indexOf("Presto")>-1,webKit:ak.indexOf("AppleWebKit")>-1,gecko:ak.indexOf("Gecko")>-1&&ak.indexOf("KHTML")<0,mobile:!!ak.match(/AppleWebKit.*Mobile.*/)||!!ak.match(/AppleWebKit/),ios:!!ak.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:ak.indexOf("Android")>-1||ak.indexOf("Linux")>-1,iPhone:ak.indexOf("iPhone")>-1||ak.indexOf("Mac")>-1,iPad:ak.indexOf("iPad")>-1,webApp:ak.indexOf("Safari")<0}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),hdpr:1};var r=(function(){var ak={istd:("ontouchstart" in window)};return ak})();function v(aK,aH,aP,ao){var ak=function(aS){var aT=parseInt(Math.round(aS*100));if(aT%100!=0){if(aT%10==0){aT*=0.1}if(aT%5!=0&&aT%2!=0){return true}}return false};var aQ=function(aT,aS){if(aS){while(aT>5){if(aT%2==0){aT*=0.5}else{if(aT%3==0){aT/=3}else{break}}}}else{if(aT>9){if(aT%3==0){aT/=3}else{if(aT%4==0){aT*=0.25}else{if(aT%2==0){aT*=0.5}}}}}return aT};var aJ=-0.000001,aL=(aH+aK)*0.5,aG=ao?[4,5,6,8,9,10,12,15,16,18,20]:[4,5,6,7,8,9,10,12,14,15,16,18,20],aI=[1,2,3,4,5,6,8],av,aq,ax=false;var am,aB,ap,aA,aR,ar,aE,at,aF,az,an,aM=aI.length,aD;for(var aO=0,ay=aG.length;aO<ay;aO++){ax=false;an=aG[aO];am=(aK-aH)/an;ar=Math.pow(10,0-aP);while(!ax){for(aD=0;aD<aM;aD++){aB=ar*aI[aD];if(aB-am>aJ){if(an&1){ap=Math.round((aL+aB*0.5)/aB)*aB;aF=(ap+(an-1)*0.5*aB).toFixed(5);az=(ap-(an+1)*0.5*aB).toFixed(5)}else{ap=Math.round(aL/aB)*aB;aF=(ap+an*0.5*aB).toFixed(5);az=(ap-an*0.5*aB).toFixed(5)}aA=Number(aF);aR=Number(az);if(aA-aK>aJ&&aR-aH<aJ){ax=true;if(aR<0){aA-=aR;aR=0}if(!aE){aE=aA-aR;av=aA;aq=aR;at=an;break}var aN=(aA-aR)/aQ(an);if(Math.round(aN*100)!=1&&Math.round(aN*10)!=1){if(ak(aN)){break}}if(aA-aR>aE){break}else{if(aA-aR==aE){var au=av-aK;var aC=aH-aq;var al=Math.abs(au-aC);au=aA-aK;aC=aH-aR;var aw=Math.abs(au-aC);if(aw>=al){break}else{if(aw==al&&at==4){}}}}if(ak(aA)){break}if(ak(aR)){break}aE=aA-aR;av=aA;aq=aR;at=an;break}}}ar*=10}}at=aQ(at,ao);return[av,aq,at]}function H(ay){var aN,av=arguments,aK,aB,ar,aL,at,au,aH,al=86400000,aD=7657,aw=[],aA=[],aC=~(3<<30),ap=1<<30,aq=[0,3,5,6,9,10,12,15,17,18,20,23,24,27,29,30],aE=Math,az=function(){var aP,aO;for(aP=0;aP<64;aP++){aA[aP]=aE.pow(2,aP);if(aP<26){aw[aP]=aI(aP+65);aw[aP+26]=aI(aP+97);if(aP<10){aw[aP+52]=aI(aP+48)}}}aw.push("+","/");aw=aw.join("");aK=ay.split("");aB=aK.length;for(aP=0;aP<aB;aP++){aK[aP]=aw.indexOf(aK[aP])}ar={};aN=au=0;at={};aO=aM([12,6]);aH=63^aO[1];return{_1479:aG,_136:ao,_200:aF,_139:am}["_"+aO[0]]||function(){return[]}},aI=String.fromCharCode,aJ=function(aO){return aO==={}._},ak=function(){var aO,aP;aO=an();aP=1;for(;;){if(an()){aP++}else{return aP*(aO*2-1)}}},an=function(){var aO;if(aN>=aB){return 0}aO=aK[aN]&(1<<au);au++;if(au>=6){au-=6;aN++}return !!aO},aM=function(aQ,aS,aP){var aR,aT,aU,aV,aO;aT=[];aU=0;if(!aS){aS=[]}if(!aP){aP=[]}for(aR=0;aR<aQ.length;aR++){aV=aQ[aR];aU=0;if(!aV){aT[aR]=0;continue}if(aN>=aB){return aT}if(aQ[aR]<=0){aU=0}else{if(aQ[aR]<=30){for(;;){aO=6-au;aO=aO<aV?aO:aV;aU|=(((aK[aN]>>au)&((1<<aO)-1))<<(aQ[aR]-aV));au+=aO;if(au>=6){au-=6;aN++}aV-=aO;if(aV<=0){break}}if(aS[aR]&&aU>=aA[aQ[aR]-1]){aU-=aA[aQ[aR]]}}else{aU=aM([30,aQ[aR]-30],[0,aS[aR]]);if(!aP[aR]){aU=aU[0]+aU[1]*aA[30]}}}aT[aR]=aU}return aT},ax=function(aR){var aP,aQ,aO;if(aR>1){aP=0}for(aP=0;aP<aR;aP++){ar.d++;aO=ar.d%7;if(aO==3||aO==4){ar.d+=5-aO}}aQ=new Date();aQ.setTime((aD+ar.d)*al);return aQ},aF=function(){var aS,aR,aT,aQ,aP,aO;if(aH>=1){return[]}ar.d=aM([18],[1])[0]-1;aQ=aM([3,3,30,6]);ar.p=aQ[0];ar.ld=aQ[1];ar.cd=aQ[2];ar.c=aQ[3];ar.m=aE.pow(10,ar.p);ar.pc=ar.cd/ar.m;aT=[];for(aS=0;;aS++){aP={d:1};if(an()){aQ=aM([3])[0];if(aQ==0){aP.d=aM([6])[0]}else{if(aQ==1){ar.d=aM([18])[0];aP.d=0}else{aP.d=aQ}}}aO={date:ax(aP.d)};if(an()){ar.ld+=ak()}aQ=aM([ar.ld*3],[1]);ar.cd+=aQ[0];aO.close=ar.cd/ar.m;aT.push(aO);if(aN>=aB||(aN==aB-1&&!((ar.c^(aS+1))&63))){break}}aT[0].prevclose=ar.pc;return aT},ao=function(){var aR,aQ,aX,aV,aW,aY,aO,aU,aP,aS,aT;if(aH>=2){return[]}aO=[];aP={v:"volume",p:"price",a:"avg_price"};ar.d=aM([18],[1])[0]-1;aU={date:ax(1)};aX=aM(aH<1?[3,3,4,1,1,1,5]:[4,4,4,1,1,1,3]);for(aR=0;aR<7;aR++){ar[["la","lp","lv","tv","rv","zv","pp"][aR]]=aX[aR]}ar.m=aE.pow(10,ar.pp);if(aH>=1){aX=aM([3,3]);ar.c=aX[0];aX=aX[1]}else{aX=5;ar.c=2}ar.pc=aM([aX*6])[0];aU.pc=ar.pc/ar.m;ar.cp=ar.pc;ar.da=0;ar.sa=ar.sv=0;for(aR=0;;aR++){if(aN>=aB||(aN==aB-1&&!((ar.c^aR)&7))){break}aW={};aV={};aS=(ar.tv?an():1);for(aQ=0;aQ<3;aQ++){aT=["v","p","a"][aQ];if(aS?an():0){aX=ak();ar["l"+aT]+=aX}aY=(aT=="v"&&ar.rv)?an():1;aX=aM([ar["l"+aT]*3+(aT=="v"?(aY*7):0)],[!!aQ])[0]*(aY?1:100);aV[aT]=aX;if(aT=="v"){if(!(aW[aP[aT]]=aX)&&aR<241&&(ar.zv?!an():1)){aV.p=0;break}}else{if(aT=="a"){ar.da=(aH<1?0:ar.da)+aV.a}}}ar.sv+=aV.v;aW[aP.p]=(ar.cp+=aV.p)/ar.m;ar.sa+=aV.v*ar.cp;aW[aP.a]=aJ(aV.a)?(aR?aO[aR-1][aP.a]:aW[aP.p]):(ar.sv?(((aE.floor((ar.sa*(2000/ar.m)+ar.sv)/ar.sv)>>1)+ar.da)/1000):(aW[aP.p]+ar.da/1000));aO.push(aW)}aO[0].date=aU.date;aO[0].prevclose=aU.pc;return aO},aG=function(){var aU,aT,aR,aP,aO,aQ,aS,aV;if(aH>=1){return[]}ar.lv=0;ar.ld=0;ar.cd=0;ar.cv=[0,0];ar.p=aM([6])[0];ar.d=aM([18],[1])[0]-1;ar.m=aE.pow(10,ar.p);aQ=aM([3,3]);ar.md=aQ[0];ar.mv=aQ[1];aU=[];for(;;){aQ=aM([6]);if(!aQ.length){break}aP={c:aQ[0]};aO={};aP.d=1;if(aP.c&32){for(;;){aQ=aM([6])[0];if((aQ|16)==63){aV=(aQ&16)?"x":"u";aQ=aM([3,3]);aP[aV+"_d"]=aQ[0]+ar.md;aP[aV+"_v"]=aQ[1]+ar.mv;break}else{if(aQ&32){aS=(aQ&8)?"d":"v";aV=(aQ&16)?"x":"u";aP[aV+"_"+aS]=(aQ&7)+ar["m"+aS];break}else{aS=aQ&15;if(aS==0){aP.d=aM([6])[0]}else{if(aS==1){ar.d=aS=aM([18])[0];aP.d=0}else{aP.d=aS}}if(!(aQ&16)){break}}}}}aO.date=ax(aP.d);for(aS in {v:0,d:0}){if(!aJ(aP["x_"+aS])){ar["l"+aS]=aP["x_"+aS]}if(aJ(aP["u_"+aS])){aP["u_"+aS]=ar["l"+aS]}}aP.l_l=[aP.u_d,aP.u_d,aP.u_d,aP.u_d,aP.u_v];aV=aq[aP.c&15];if(aP.u_v&1){aV=31-aV}if(aP.c&16){aP.l_l[4]+=2}for(aR=0;aR<5;aR++){if(aV&(1<<(4-aR))){aP.l_l[aR]++}aP.l_l[aR]*=3}aP.d_v=aM(aP.l_l,[1,0,0,1,1],[0,0,0,0,1]);aS=ar.cd+aP.d_v[0];aO.open=(aS)/ar.m;aO.high=(aS+aP.d_v[1])/ar.m;aO.low=(aS-aP.d_v[2])/ar.m;aO.close=(aS+aP.d_v[3])/ar.m;aQ=aP.d_v[4];if(typeof(aQ)=="number"){aQ=[aQ,aQ>=0?0:-1]}ar.cd=aS+aP.d_v[3];aV=(ar.cv[0]+aQ[0]);ar.cv=[aV&aC,(ar.cv[1]+aQ[1]+!!(((ar.cv[0]&aC)+(aQ[0]&aC))&ap))];aO.volume=(ar.cv[0]&(ap-1))+ar.cv[1]*ap;aU.push(aO)}return aU},am=function(){var aP,aO,aQ,aR;if(aH>1){return[]}ar.l=0;aR=-1;ar.d=aM([18])[0]-1;aQ=aM([18])[0];while(ar.d<aQ){aO=ax(1);if(aR<=0){if(an()){ar.l+=ak()}aR=aM([ar.l*3],[0])[0]+1;if(!aP){aP=[aO];aR--}}else{aP.push(aO)}aR--}return aP};return az()()}function E(ar,at){if(!ar||ar.length<9||!at){return null}var ak=H(ar);var ap=D.dd(at);var ao=new Date(ap.getFullYear()-3,ap.getMonth(),ap.getDate());var aq=0,au=0;for(var al,an=0,am=ak.length;an<am;an++){al=ak[an];if(al.getTime()<=ao.getTime()&&ak[an+1].getTime()>=ao.getTime()){aq=an}if(D.stbd(al,ap)){au=an+1}}return ak.slice(aq,au)}function z(am,al,ak){al=al||document;return al.getElementById(am)}function M(ak){return document.createElement(ak)}function ag(al,ak){if(al.compareDocumentPosition){return al===ak||!!(al.compareDocumentPosition(ak)&16)}if(al.contains&&ak.nodeType===1){return al.contains(ak)&&al!==ak}while((ak=ak.parentNode)){if(ak===al){return true}}return false}function e(ao,am,ap,al){var ak=false,an=document.getElementsByTagName("script")[0],aq=document.createElement("script");aq.type="text/javascript";aq.charset=al||"utf-8";aq.src=ao;aq.async=true;aq.onload=aq.onreadystatechange=function(){if(!ak&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){ak=true;(typeof am==="function")&&am();aq.onload=aq.onreadystatechange=aq.onerror=null;aq.parentNode.removeChild(aq)}};aq.onerror=function(){(typeof ap==="function")&&ap();aq.onload=aq.onreadystatechange=aq.onerror=null;aq.parentNode.removeChild(aq)};an.parentNode.insertBefore(aq,an)}var S={T1_DATA_LOADED:"t1DataLoaded",T5Y_DATA_LOADED:"t5yDataLoaded",K_DATA_LOADED:"kDataLoaded",KMIN_DATA_LOADED:"kMinDataLoaded",UPDATE:"update",RANGE_RESET:"rangeReset"};var B={ZOOM_IN:"zoomin",ZOOM_OUT:"zoomout",UPDATE:"update"};function i(ak){return ak.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}var l={get:function(ak){var al=document.cookie.match("(?:^|;)\\s*"+i(ak)+"=([^;]*)");return al?al[1]||"":""},set:function(ar,aq,am){!am&&(am={});if(!aq){aq="";am.expires=-1}var ak="";if(am.expires&&(Number(am.expires)||am.expires.toUTCString)){var al;if(Number(am.expires)){al=new Date();al.setTime(al.getTime()+am.expires*1000)}else{al=am.expires}ak="; expires="+al.toUTCString()}var ap=am.path?"; path="+(am.path):"";var an=am.domain?"; domain="+(am.domain):"";var ao=am.secure?"; secure":"";document.cookie=[ar,"=",aq,ak,ap,an,ao].join("")}};var x=new function(){var ao="sinaH5EtagStatus",at={domain:"",path:"/",expires:3600*1},ar="n",am="y",an="http://hq.sinajs.cn/list=sys_time",aq=0;var ap;this.isETag=function(){return ap};var al=function(){e(an,function(){var au=window.hq_str_sys_time;if(aq==0){aq=au}else{if(aq==au){ap=false;l.set(ao,ar,at)}else{ap=true;l.set(ao,am,at)}aq=0}})};var ak=function(){var au=l.get(ao);switch(au){case ar:ap=false;break;case am:ap=true;break;default:ap=false;al();break}};ak();setInterval(ak,2000)};var p={AUTO_H:"auto height is used",ERR_IHQ:"unexpected ihq"};function aa(ak,al){if(console){al?(console.info&&console.info(ak)):(console.error&&console.error(ak))}}var ad=function(ak){ak="http://finance.sina.com.cn/stat/h5/"+ak;e(ak)};function Z(){this.gArr;this.iArr}Z.prototype.visible=function(am){for(var al=0,ak=this.gArr.length;al<ak;al++){this.gArr[al].visible(am)}};Z.prototype.resize=function(){for(var al=0,ak=this.gArr.length;al<ak;al++){this.gArr[al].resize()}};function u(){this.minPrice,this.maxPrice;this.labelMaxP,this.labelMinP;this.minPercent,this.maxPercent;this.maxVolume,this.labelMaxVol;this.labelPriceCount;this.poses,this.marks,this.dataLen=0,this.datas,this.days,this.prevclose;this.oldLabelMaxP,this.oldLabelMinP,this.oldLabelMaxVol,this.oldDataLen=0,this.dataLenOffset=0,this.isTotalRedraw=true}u.prototype.initExtValues=function(){this.minPrice=Number.MAX_VALUE;this.maxPrice=0;this.minPercent=1;this.maxPercent=0;this.maxVolume=0};u.prototype.initCoors=function(){if(!this.poses||!this.marks){this.poses=[];this.marks=[]}var ak=this.dataLen;(this.poses.length>ak)&&this.poses.splice(ak);(this.marks.length>ak)&&this.marks.splice(ak);for(var al=this.poses.length;al<ak;al++){this.poses.push([]);this.marks.push([])}};var L,R,C,ac;var n=function(ak,al){if(!C){return}clearTimeout(ac);if(ak&&ak!=""){C.innerHTML=ak;C.style.display="";if(!isNaN(al)&&al>0){ac=setTimeout(function(){C.style.display="none"},al*1000)}}else{C.style.display!="none"&&(C.style.display="none")}};var b=[];var q=function(al){for(var an,am=0,ak=b.length;am<ak;am++){an=z(b[am]);an&&(an.style.display=al?"none":"")}};var Q=[];var W=function(am,an){for(var ap,ao=0,al=Q.length;ao<al;ao++){ap=Q[ao];if(ap){ap.style.display=am?"none":"";var ak=j.DIMENSION.getStageW();if(an=="365"){ap.style.left=(ak-Math.abs(ao-2)*25-40)+"px"}else{ap.style.left=(ak-Math.abs(ao-2)*25)+"px"}}}};var F=M("canvas");if(F.getContext&&F.getContext("2d")){var k=window.devicePixelRatio||1,ae=F.getContext("2d").webkitBackingStorePixelRatio||1;aj.hdpr=k/ae}else{(typeof X==="function")&&X();return}var j={PARAM:{updateRate:3000,DESIGNATE_RATE:3000,SLOW_RATE:10000,NUM_T_P_L:5,minCandleNum:20,defaultCandleNum:66,K_TO_CL_LIMIT:257,K_CL_NUM:260,TOUCH_THRESHOLD:370,BG_Z_INDEX:0,I_Z_INDEX:8000,G_Z_INDEX:5000,allowEtag:true,_hd:1,setHd:function(ak){(typeof ak==="number")&&(this._hd=ak)},getHd:function(){return this._hd},allowV:false},URL:{oriHqUrl:"http://hq.sinajs.cn/?_=$rn&list=$symbol",etagHqUrl:"http://hq.sinajs.cn/etag.php?_="+(Math.random()+Math.random())+"&list=$symbol",getHqUrl:function(ak){if(!ak&&j.PARAM.allowEtag){return x.isETag()?this.etagHqUrl:this.oriHqUrl.replace("$rn",Math.random())}return this.oriHqUrl.replace("$rn",Math.random())},A_K_URL:"http://finance.sina.com.cn/realstock/company/$symbol/hisdata/klc_kl.js?day=$rn&from=wap",A_T5Y_URL:"http://finance.sina.com.cn/realstock/company/$symbol/hisdata/klc_cm.js?day=$rn",A_MINK_URL:"http://money.finance.sina.com.cn/quotes_service/api/jsonp_v2.php/$cb/CN_MarketData.getKLineData?symbol=$symbol&scale=$scale&ma=no&datalen=1023",A_TRADING_DATES_URL:"http://finance.sina.com.cn/realstock/company/klc_td_sh.txt"},URLHASH:{TS:1,T5:5,FAKE_T5:2,CL:3,KCL:365,KD:24,KW:168,KM:720,K5:5,K15:15,K30:30,K60:60,NTS:"ts",NT5:"t5",NCL:"cl",TCL:"tcl",NKD:"kd",NKW:"kw",NKM:"km",NK5:"k5",NK15:"k15",NK30:"k30",NK60:"k60",YTD:983,NYTD:"ytd",vi:function(ak){switch(ak){default:return this.TS;case this.NT5:return this.FAKE_T5;case this.NCL:return this.KCL;case this.NKD:return this.KD;case this.NKW:return this.KW;case this.NKM:return this.KM;case this.NK5:return this.K5;case this.NK15:return this.K15;case this.NK30:return this.K30;case this.NK60:return this.K60;case this.NYTD:return this.YTD}}},DIMENSION:{_w:500,_h:300,RIGHT_W:45,w_main:370,w_k:500,lbX:1,posX:50,posY:0,h_main:200,h_k:185,H_MA4K:20,H_TIME_PART:15,h_vol:40,MIN_H:180,setStageW:function(ak){if(ak<0){return}this._w=ak;this.w_k=ak-this.posX-5;this.w_main=ak-this.posX-this.RIGHT_W},setStageH:function(ak){if(ak<0){return}(ak<this.MIN_H)&&(ak=this.MIN_H);this._h=ak;this.h_main=ak*0.75;this.h_k=this.h_main-this.H_MA4K;this.h_vol=ak-this.h_main-this.H_TIME_PART},getStageW:function(){return this._w},getStageH:function(){return this._h},getLeftW:function(){return this.posX-this.lbX}},STYLE:{FONT_FAMILY:"helvetica,arial,sans-serif"},COLOR:{T_P:"#007cc8",T_AVG:"#000000",T_V:"#9b9b9b",T_PREV:"#9b9b9b",K_RISE:"#fc0404",K_FALL:"#00a800",K_N:"#000000",K_CL:"#0077cc",K_P:"#333333",K_EXT:"#aaaaaa",K_ZB:"#ddd",V_S:"#555555",V_F:"#444444",TIME_F:"#333333",TIME_S:"#555555",F_BG:"#eeeeee",GRID:"#dddddd",PR_BACK:"#f0f0f0",IVH_LINE:"#999999",newTheme:function(ak){for(var al in ak){/^#[0-9a-fA-F]{6}$/.test(ak[al])&&this.hasOwnProperty(al)&&(typeof(this[al])!="function")&&(this[al]=ak[al])}}},MA:{DEFAULT_MADAYS_ARR:[5,10,20,30],DEFAULT_MACOLOR_ARR:["#00477D","#12BDD9","#EE2F72","#8CBB0D"],dayArr:[5,10,20,30],colorArr:["#00477D","#12BDD9","#EE2F72","#8CBB0D"],getWorkingMAArr:function(){var am=[],an=[];for(var al=0,ak=this.dayArr.length;al<ak;al++){if(this.dayArr[al]>0){am[am.length]=this.dayArr[al];an[an.length]=this.colorArr[al]}}return[am,an]}},TIP:{INIT:"初始化...",LOAD_DATA:"数据准备中",NO_RECORD:"您查询的内容无记录",NOT_LISTED:"您查询的股票未上市",DELISTED:"您查询的股票已退市",NO_T_DATA:"无分时数据",NO_K_DATA:"无K线数据",ERR:"数据加载失败"},datas:{s:"sh000001",mode:"wap",tDataLen:242,t:""},stat:{i:"init.txt?type=cn"}};function I(al){this.ihqObj={};if(!al||al.length<16){aa(p.ERR_IHQ,true);return}var ak=al.split(",");this.ihqObj.t=j.datas.t=String(ak[0]).toLowerCase();this.ihqObj.l5=Number(ak[6]);this.ihqObj.fc=Number(ak[8]);this.ihqObj.ip=Number(ak[14]);this.ihqObj.st=ak[15]}function G(av,ay){var am=av,aw={"00":"","01":"临时停牌","02":"停牌","03":"停牌","04":"临时停牌","05":"临时停牌","07":"暂停"},az=/^(sh000|sh580)\d+/.test(am),aA,an={},ax,ar=false,au=J.gta();var ao,ap,aq,aB,ak=false;this.hqTotalAmount=function(){return ao};this.isPreMkt=function(){return ap};this.isUpdateTime=function(){return aq};this.index=function(){return aB};this.isTotalRe=function(){return ak};this.hqObj={};this.inited=false;this.tmpInited=false;var al=function(aJ){ar=this.hqObj.isDateChange=false;var aE=aJ.split("-"),aI=~~Number(aE[0]),aD=~~(Number(aE[1])-1),aG=~~Number(aE[2]);if(this.hqObj.date==null){this.hqObj.date=new Date(aI,aD,aG)}else{var aH=D.stbs(this.hqObj.date,aI,aD,aG);if(!aH){var aF=new Date(aI,aD,aG);this.hqObj.isDateChange=Boolean(aF>this.hqObj.date);if(this.hqObj.isDateChange){this.hqObj.date=D.dd(aF)}else{ar=true}}}};var aC=function(aG){var aF=aG.split(":"),aD=Number(aF[0]),aE=Number(aF[1]);ap=Boolean(aD==9&&aE<30);aq=true;aB=au.indexOf([ai.zp(aD),ai.zp(aE)].join(":"));if(aD==9&&aE<30&&aE>=25){aB=0}if(aB<0){aq=false}if(typeof ax==="undefined"){ak=false;ax=aB;return}ak=aB-ax>2;ax=aB};this.update=function(aD){at.call(this,aD)};this.saveData=function(aD){aD&&(aA=aD)};(function(){this.hqObj.digits=(/^(sh(90|58))|(sz20)|(sz1[56])\d+/.test(am))?3:2;this.update(ay)}).call(this);function at(aE){if(!aE){return}var aD=aE.split(",");if(!aD||aD.length<33){return}this.hqObj.name=String(aD[0]);this.hqObj.prevclose=Number(aD[2])||1;this.hqObj.open=Number(aD[1])||this.hqObj.prevclose;this.hqObj.price=Number(aD[3])||this.hqObj.prevclose;this.hqObj.high=Number(aD[4])||this.hqObj.prevclose;this.hqObj.low=Number(aD[5])||this.hqObj.prevclose;this.hqObj.buy=Number(aD[6]);this.hqObj.sell=Number(aD[7]);this.hqObj.totalVolume=Number(aD[8])||0;this.hqObj.totalAmount=ao=Number(aD[9]);this.hqObj.time=String(aD[31]).substr(0,5);this.hqObj.today=String(aD[30]);this.hqObj.status=String(aD[32]);this.hqObj.isStopDay=(this.hqObj.status=="02"||this.hqObj.status=="03");this.hqObj.statusStr=aw[this.hqObj.status]||"";!az&&(this.hqObj.totalVolume*=0.01);if(aE.charAt(0)=="N"){j.datas.t="n"}al.call(this,this.hqObj.today);if(ar){return}aC.call(this,this.hqObj.time);if(aA){if(this.inited){this.hqObj.volume=this.hqObj.totalVolume-aA.totalVolume||0;this.hqObj.amount=this.hqObj.volume*this.hqObj.price;this.hqObj.totalAmount=this.hqObj.amount+aA.totalAmount;this.hqObj.avg_price=(this.hqObj.totalAmount/this.hqObj.totalVolume)||this.hqObj.price}else{this.hqObj.volume=0;this.hqObj.avg_price=(aA.totalAmount/aA.totalVolume)||this.hqObj.price;this.hqObj.totalAmount=this.hqObj.totalVolume*this.hqObj.avg_price;this.inited=true}aA.totalVolume=this.hqObj.totalVolume;aA.totalAmount=this.hqObj.totalAmount}else{if(this.tmpInited){this.hqObj.volume=this.hqObj.totalVolume-an.totalVolume||0}else{this.hqObj.volume=0;this.tmpInited=true}an.totalVolume=this.hqObj.totalVolume}}}o.prototype=new T();function o(aM,ay,az,al,aL){var ap=this;T.call(this);var aF,aD=aM,am=ay,aK=az,aC=al,aB=aL,au=false,at=3,an=function(){n(j.TIP.ERR,3)},av,ar,ax,aI,aw;var ao=function(aR,aT,aV){if(!aT){return}var aP,aS;if(aR==1&&D.stbd(aT,aD.hqObj.date)){aP=av}else{if(aR<=5){for(aS=0;aS<5;aS++){if(D.stbd(aT,ar[aS][0].date)){break}}aP=[];for(var aQ=aS+aR;aS<aQ;aS++){aP=aP.concat(ar[aS])}}else{if(aR>=365){var aO=aI.length;for(aS=0;aS<aO;aS++){if(D.stbd(aT,aI[aS].date)){break}}if(aS>=aO){return}(aS!=0)&&(aI[aS].prevclose=aI[aS-1].price);if(aR==365){aO=Math.ceil(aI.length/3)}else{if(aR==665){aO=Math.ceil(aI.length/3*2)}}var aU=aO+aS;((aU+5)>aI.length)&&(aU=aI.length);aP=aI.slice(aS,aU)}}}aw.setData(aP,aR,aV)};var aA=function(){!aw&&(aw=new y(aD));if(aC){aH(true);return}var aO=am;aM.isPreMkt()?aH(true):e(j.URL.oriHqUrl.replace("$rn",Math.random()).replace("$symbol","ml_"+aO),aH,an)};var aJ=function(){if(av){aE()}else{au=true;aA()}};this.symbol=function(){return am};this.td1=function(){return av};this.tdy=function(){return aI};this.td5=function(){return ar};this.latest5=function(){return ax};this.tO=function(){return aw};var aG={t3v:2,t3b:3,t5v:4,t5b:5,t1v:0,t1b:1};this.tState=function(){return aG};this.setRange=ao;this.initT1=aA;this.initT5Y=aJ;this.update=function(){if(!av){return}var aO=av[aD.index()];if(!aO){return}aO.price=aD.hqObj.price;aO.avg_price=aD.hqObj.avg_price||aO.price;aO.volume+=aD.hqObj.volume;if(av[0].volume>0){av[0].price=aD.hqObj.open}if(!aI){return}aO=aI[aI.length-1];aO.close=aD.hqObj.price;aO.volume=aD.hqObj.totalVolume;(aD.hqObj.price>aO.high)&&(aO.high=aD.hqObj.price);(aD.hqObj.price<aO.low)&&(aO.low=aD.hqObj.price)};this.reloadT1=function(){e(j.URL.oriHqUrl.replace("$rn",Math.random()).replace("$symbol","ml_"+am),function(){var aQ=J.fB(J.db(window["hq_str_ml_"+am]),false,"CN");if(aQ[0].price<=0){aQ[0].price=aQ[0].avg_price=aD.hqObj.prevclose}for(var aP=0,aO=j.datas.tDataLen;aP<aO;aP++){av[aP].price=aQ[aP].price;av[aP].avg_price=aQ[aP].avg_price;av[aP].volume=aQ[aP].volume}av[0].totalVolume=aQ[0].totalVolume;av[0].totalAmount=aQ[0].totalAmount;aD.inited=aD.tmpInited=false},an)};this.newDayComes=function(){av=J.gltbt(1,aD.hqObj.price,true,"CN");av[0].date=D.dd(aD.hqObj.date);av[0].prevclose=aD.hqObj.prevclose;av[0].price=aD.hqObj.price;av[0].volume=aD.hqObj.totalVolume;if(ax){var aR=0,aQ=0;for(var aP=0,aO=ax.length;aP<aO;aP++){if(ax[aP][0].totalVolume){aQ+=Number(ax[aP][0].totalVolume);aR++}}av[0].lastfive=aQ/aR/240||0;ax.shift();ax.push(av)}else{av[0].lastfive=0}aD.saveData(av[0]);aD.inited=aD.tmpInited=false;aF&&(aF[aF.length]=D.dd(aD.hqObj.date));aI&&aI.push({price:aD.hqObj.price,date:D.dd(aD.hqObj.date),volume:aD.hqObj.totalVolume})};function aE(){if(aF&&aF.length>3*200){ak()}else{window.datelist=null;if(at-->0){e(j.URL.A_TRADING_DATES_URL,function(){var aO=window.datelist;window.datelist=null;aF=E(aO,aD.hqObj.date);aE()},an)}else{an()}}}function aH(aO){if(aO){av=J.gltbt(1,aD.hqObj.price,!aC);!aC&&(av[0].volume=aD.hqObj.totalVolume)}else{var aP=window["hq_str_ml_"+am];window["hq_str_ml_"+am]=null;av=aP==""?J.gltbt(1,aD.hqObj.price,true):J.fB(J.db(aP),false,"CN")}if(av[0].price<=0){av[0].price=av[0].avg_price=aD.hqObj.prevclose}if(av[0].volume>0){av[0].price=aD.hqObj.open}av[0].date=D.dd(aD.hqObj.date);av[0].prevclose=aD.hqObj.prevclose;av[0].lastfive=aK;aD.saveData(av[0]);ap.re(S.T1_DATA_LOADED);au&&aE()}function aq(aY){var aV=[];for(var aS=0,aP=aY.length;aS<aP;aS++){aV[aV.length]=(aS==0&&aY[0]=="")?J.gltbt(1,aD.hqObj.prevclose):H(aY[aS]);var aQ,aO=0;for(var aR=0,aX=j.datas.tDataLen;aR<aX;aR++){aQ=(aV[aS][aR].volume*=0.01);aO+=aQ}aV[aS][0].totalVolume=aO}var aU=aV.length;(aU>5)&&aV.splice(0,aU-5);ax=[av];aU=aF.length;for(var aS=aU-2;aS>aU-6;aS--){for(var aR=0,aW=aV.length;aR<aW;aR++){if(D.stbd(aV[aR][0].date,aF[aS])){ax.unshift(J.azft(aV[aR],"CN"));break}if(aR==aV.length-1){var aT=ax[0][0].prevclose;ax.unshift(J.gltbt(1,aT));ax[0][0].date=(aC&&aV.length==1)?aD.hqObj.date:D.dd(aF[aS]);ax[0][0].prevclose=aT}}}ar=ax}function aN(aT){!aT&&(aT=[]);if(aT.length==0){aT.push({prevclose:aD.hqObj.prevclose,close:aD.hqObj.price,date:D.dd(aD.hqObj.date)})}if(!D.stbd(aT[aT.length-1].date,aD.hqObj.date)){aT.push({close:aD.hqObj.price,date:D.dd(aD.hqObj.date)})}if(!aT[0].prevclose||aT[0].prevclose<=0){aT[0].prevclose=aT[0].price||aD.hqObj.prevclose}aI=[];for(var aR=aT.length,aO=0,aQ=0,aS=aF.length;aQ<aS;aQ++){for(var aP=aO;aP<aR;aP++){if(D.stbd(aT[aP].date,aF[aQ])){aI.push({price:aT[aP].close,date:aF[aQ]});aO=aP+1;break}if(aP==aR-1){if(aO==0){aI.push({price:aT[0].prevclose,prevclose:aT[0].prevclose,date:aF[aQ]})}else{aI.push({price:aT[aO-1].close,date:aF[aQ]})}}}}}function ak(){e(j.URL.A_T5Y_URL.replace("$symbol",am).replace("$rn",aD.hqObj.today),function(){var aP=window["KLC_ML_"+am];window["KLC_ML_"+am]=null;var aQ=window["KLC_CL_"+am];window["KLC_CL_"+am]=null;var aO=aP.split(",");aq(aO);ap.re(S.T5Y_DATA_LOADED)},an)}}y.prototype=new u();function y(am){u.call(this);var al=am,ak=al.hqObj.digits,ao,an=j.datas.tDataLen;var aq=function(av){for(var at=0,ar=this.datas.length;at<ar;at++){if(this.datas[at].price<=0){continue}this.dataLen=at;if(this.minPrice>this.datas[at].price){this.minPrice=this.datas[at].price}if(this.maxPrice<this.datas[at].price){this.maxPrice=this.datas[at].price}if(this.maxVolume<this.datas[at].volume){this.maxVolume=this.datas[at].volume}}this.dataLen++;var au=Math.max(Math.abs(this.prevclose-this.maxPrice),Math.abs(this.prevclose-this.minPrice));if(au/this.prevclose<0.01){au=this.prevclose*0.01}this.minPrice=this.prevclose-au;this.maxPrice=this.prevclose+au;this.maxPercent=Math.max((this.maxPrice-this.prevclose)/this.prevclose,0);this.minPercent=Math.min((this.minPrice-this.prevclose)/this.prevclose,0);this.labelMaxP=this.maxPrice;this.labelMinP=this.minPrice;this.labelMaxVol=this.maxVolume;this.isTotalRedraw=true};this.dates=function(){return ao};this.setData=function(ax,aw,az){this.days=aw;this.datas=ax;this.prevclose=ax[0].prevclose;if(isNaN(this.prevclose)||this.prevclose<0.01){this.prevclose=ax[0].price}this.initExtValues();aq.call(this,az);this.initCoors();ap.call(this);ao=[];var av,at,ar=j.DIMENSION.w_main,ay=(ar>430)?9:(ar>320)?8:(ar>160)?7:6;if(this.days==1){ao=(ay>7)?["09:30","10:30","11:30/13:00","14:00","15:00"]:["09:30","","11:30/13:00","","15:00"]}else{if(this.days<=5){for(at=0;at<this.days;at++){av=ax[at*an].date;ao[ao.length]=(((ay>=9)?(av.getFullYear()+"/"):"")+((ay>6)?((av.getMonth()+1)+"/"):"")+av.getDate()+((ay>=8)?D.nw(av.getDay()):""))}}else{var au;for(at=0;at<5;at++){au=Math.floor((this.datas.length-1)*at*0.25);av=ax[au].date;ao.push([av.getFullYear(),(ai.zp(av.getMonth()+1)),(ai.zp(av.getDate()))].join("/"))}}}};function ap(){var ax=j.DIMENSION.h_main,az=j.DIMENSION.h_vol,aw=this.isTotalRedraw?0:(this.dataLen-this.dataLenOffset);for(var aA,au,av,ay,aB,ar,at=this.dataLen;aw<at;aw++){aA=this.poses[aw];au=this.marks[aw];av=this.datas[aw];if(av.price>0){ay=(av.price-this.prevclose)/this.prevclose;av.percent=ay;aA[0]=g.pp(av.price,this.labelMinP,this.labelMaxP,ax);aA[1]=g.pp(av.avg_price||this.datas[aw==0?0:aw-1].avg_price,this.labelMinP,this.labelMaxP,ax);aA[2]=g.vp(av.volume,this.labelMaxVol,az);au[0]=ai.ps(av.price,ak);au[1]=ai.ps(av.avg_price,ak);au[2]=ai.vs(av.volume,true);au[3]=(ay*100).toFixed(ak)+"%"}else{aB=aw==0?0:aw-1;ar=this.datas[aB];av.percent=ar.percent;av.price=ar.price;av.avg_price=ar.avg_price;aA[0]=this.poses[aB][0];aA[1]=this.poses[aB][1];aA[2]=this.poses[aB][2];au[0]=this.marks[aB][0];au[1]=this.marks[aB][1];au[2]=0;au[3]=this.marks[aB][3]}if(this.days==365||this.days==665||this.days==965){au[1]="-"}}}}t.prototype=new T();function t(aN,aJ,ax){var aq=this;T.call(this);var aB=aN,aw=aJ,am=ax,aG,ap,aK="mink_",aF=false;var an,al,aC,aD,aL,az,ak,aI,at,aM;var ao=function(){n(j.TIP.ERR,3)},aH=function(){ao();aF=false},ay=function(){if(j.datas.t=="n"){ar()}else{ao()}};var av=function(){var aO=j.MA.getWorkingMAArr()[0];ah.ama(an,aO);ah.ama(aC,aO);ah.ama(al,aO);ah.ama(aL,aO);ah.ama(az,aO);ah.ama(ak,aO);ah.ama(aI,aO)};this.datas_day=function(){return an};this.datas_week=function(){return al};this.datas_month=function(){return aC};this.datas_ytd=function(){return aD};this.datas_5min=function(){return aL};this.datas_15min=function(){return az};this.datas_30min=function(){return ak};this.datas_60min=function(){return aI};this.kO=function(){return at};this.kState=function(){return aM};this.init=function(){e(j.URL.A_K_URL.replace("$symbol",am).replace("$rn",aB.hqObj.today?aB.hqObj.today:""),function(){var aO=window["KLC_KL_"+am];window["KLC_KL_"+am]=null;aO=H(aO);au(aO);aq.re(S.K_DATA_LOADED)},ay)};this.initMinK=function(aO){if(aF){return}aF=true;ap=aO;e(j.URL.A_MINK_URL.replace("$symbol",am).replace("$scale",aO).replace("$cb","var%20"+aK+aO+"="),function(){aF=false;var aP=window[aK+ap];window[aK+ap]=null;if(!aP){return}for(var aR=0,aQ=aP.length;aR<aQ;aR++){aP[aR].high*=1;aP[aR].open*=1;aP[aR].low*=1;aP[aR].close*=1;aP[aR].volume*=0.01}ah.pd(aP);switch(ap){case 5:aL=aP;break;case 15:az=aP;break;case 30:ak=aP;break;case 60:aI=aP;break}!aM&&(aM=new s(aq));aM.initState(ap,aP);ah.ama(aP,j.MA.getWorkingMAArr()[0]);aq.re(S.KMIN_DATA_LOADED)},aH)};this.setRange=function(aP,aR,aT,aU,aQ){var aO=aM?aM.get(aP):null;if(!aO){return}!at&&(at=new P(aB));var aS=aR>1?aO[aR-1].close:aO[0].prevclose;if(isNaN(aS)){aS=aO[0].close}at.setData(aO.slice(aR,aT),aS,aU,aQ)};this.calcAllMA=av;this.newDayComes=function(){ah.nc(an,aB.hqObj,"d");ah.nc(al,aB.hqObj,"w");ah.nc(aC,aB.hqObj,"m");aE(an);aE(al);aE(aC)};this.update=function(){if(aB.hqObj.totalVolume<1){return}aE(an);aE(al);aE(aC);aA(aL,5);aA(az,15);aA(ak,30);aA(aI,60)};function au(aP){var aR=aB.hqObj.date?aB.hqObj.date:aP[aP.length-1].date;if(aP.length==0||!D.stbd(aP[aP.length-1].date,aR)){aP[aP.length]={open:aB.hqObj.open,high:aB.hqObj.high,low:aB.hqObj.low,close:aB.hqObj.price,volume:aB.hqObj.totalVolume*100,date:D.dd(aR)}}an=aP;var aQ=aw.ihqObj.ip;aG=(!isNaN(aQ)&&aQ>0)?aQ:aP[0].open;an[0].prevclose=aG;var aO=ah.mw(an,aB.hqObj,aG,100);al=aO[0];aC=aO[1];av();ah.pd(an);ah.pd(al);ah.pd(aC);aD=ah.yd(an);aM?aM.initDWMState():(aM=new s(aq))}function aE(aQ,aP){if(!aQ||aQ.length==0){return}var aO=aQ[aQ.length-1];if(isNaN(aO.volume)){aO.volume=aB.hqObj.volume}else{aO.volume+=aB.hqObj.volume}aO.close=aB.hqObj.price;if(aQ===an){aO.open=aB.hqObj.open;aO.high=aB.hqObj.high;aO.low=aB.hqObj.low;aO.volume=aB.hqObj.totalVolume}if(aQ.length==1){if(aQ===an){aO.percent=(aB.hqObj.price-aB.hqObj.prevclose)/aB.hqObj.prevclose}else{aO.percent=(aB.hqObj.price-aO.open)/aO.open}}else{aO.percent=(aB.hqObj.price-aQ[aQ.length-2].close)/aQ[aQ.length-2].close}if(aB.hqObj.price>aO.high){aO.high=aB.hqObj.price}if(aB.hqObj.price<aO.low){aO.low=aB.hqObj.price}aP&&(aO.time=aB.hqObj.time);ah.uma(aQ,j.MA.getWorkingMAArr()[0])}function aA(aQ,aO){if(!aQ){return}if(!J.ist("CN",aB.hqObj.time)){return}if(D.stbd(aQ[aQ.length-1].date,aB.hqObj.date)&&ah.spk(aQ[aQ.length-1].time,aB.hqObj.time,"09:30",aO)){aE(aQ,true)}else{if(aB.hqObj.totalVolume<1){return}var aP=(aB.hqObj.price-aQ[aQ.length-1].close)/aQ[aQ.length-1].close;aQ.push({open:aB.hqObj.price,high:aB.hqObj.price,low:aB.hqObj.price,close:aB.hqObj.price,volume:aB.hqObj.volume,percent:aP,day:String(aB.hqObj.today).split("-").join("/"),date:aB.hqObj.date,time:aB.hqObj.time});if(ah.spk("09:35",aB.hqObj.time,"09:30",aO)){aQ[aQ.length-1].open=aB.hqObj.open}ah.uma(aQ,j.MA.getWorkingMAArr()[0])}}function ar(){j.datas.t="n";au([]);aq.re(S.K_DATA_LOADED)}}P.prototype=new u();function P(am){u.call(this);var al=am,ak=al.hqObj.digits,ao,an=false;var aq=function(av){var aB=0,aA,ar=0,aE=Number.MAX_VALUE;for(var aD=[],az,ay=j.MA.getWorkingMAArr()[0].length,aw=this.dataLen;aB<aw;aB++){aA=this.datas[aB];if(aA.close<=0){continue}if(aA.high>ar){ar=aA.high}if(aA.low<aE){aE=aA.low}for(az=0;az<ay;az++){aD[az]=aA["ma_p"+az]}this.labelMaxP=this.maxPrice=Math.max.apply(Math,[this.maxPrice,aA.close,0,aA.high].concat(aD));this.labelMinP=this.minPrice=Math.min.apply(Math,[this.minPrice,aA.close,aA.low].concat(aD));if(this.minPrice<0){this.labelMinP=this.minPrice=0}this.labelMaxVol=this.maxVolume=Math.max(this.maxVolume,0,aA.volume)}var au=false,ax=false;for(aB=this.datas.length;aB--;){aA=this.datas[aB];if(au){aA.isH=false}else{if(ar==aA.high){aA.isH=true;au=true}else{aA.isH=false}}if(ax){aA.isL=false}else{if(aE==aA.low){aA.isL=true;ax=true}else{aA.isL=false}}}var aC=v(this.maxPrice,this.minPrice,2,false);this.labelMaxP=aC[0];this.labelMinP=aC[1];this.labelPriceCount=aC[2];aC=v(this.maxVolume,0,0,true);this.labelMaxVol=aC[0];if(an){var at=Math.max(Math.abs(this.prevclose-this.maxPrice),Math.abs(this.prevclose-this.minPrice));this.minPrice=this.prevclose-at;this.maxPrice=this.prevclose+at}this.isTotalRedraw=true};var ap=function(){var aD=j.DIMENSION.h_k,aH=j.DIMENSION.h_vol,aF=j.MA.getWorkingMAArr()[0].length,ax=j.COLOR.K_RISE,aG=j.COLOR.K_FALL,aI=j.COLOR.K_N;var au,at;if(an){au=this.minPrice;at=this.maxPrice}else{au=this.labelMinP;at=this.labelMaxP}var aE=this.labelMaxVol,ar=this.prevclose,aC=this.isTotalRedraw?0:(this.dataLen-this.dataLenOffset);for(var aJ,av,aw,ay,aA,az,aB=this.dataLen;aC<aB;aC++){aJ=this.datas[aC];av=this.poses[aC];aw=this.marks[aC];av[0]=g.pp(aJ.close,au,at,aD);av[1]=g.pp(aJ.open,au,at,aD);av[2]=g.vp(aJ.volume,aE,aH);av[3]=g.pp(aJ.high,au,at,aD);av[4]=g.pp(aJ.low,au,at,aD);av[5]?av[5].splice(aF):(av[5]=[]);aw[6]?aw[6].splice(aF):(aw[6]=[]);for(aA=0;aA<aF;aA++){ay=aJ["ma_p"+aA];av[5][aA]=g.pp(ay,au,at,aD);aw[6][aA]=ai.ps(ay,ak)}if(aJ.close>aJ.open){av[7]=av[0];av[8]=av[1];av[14]=av[9]=ax}else{if(aJ.open>aJ.close){av[7]=av[1];av[8]=av[0];av[14]=av[9]=aG}else{av[7]=av[8]=av[0]||av[1];av[9]=aI;av[14]=(aC==0)?ax:(aJ.close<this.datas[aC-1].close?aG:ax)}}az=(aJ.close-ar)/ar;av[13]=az;aw[0]=ai.ps(aJ.close,ak);aw[1]=ai.ps(aJ.high,ak);aw[2]=ai.vs(aJ.volume,true);aw[3]=(aJ.percent*100).toFixed(ak)+"%";aw[4]=ai.ps(aJ.low,ak);aw[5]=ai.ps(aJ.open,ak);aw[8]=(az*100).toFixed(ak)+"%"}};this.setData=function(ar,au,av,at){if(!ar||ar.length==0){return}ao=at;an=(at==j.URLHASH.KCL);this.datas=ar;this.dataLen=this.days=ar.length;this.prevclose=au;this.initExtValues();aq.call(this,av);this.initCoors();ap.call(this)}}function s(al){var an=al,am=j.PARAM.defaultCandleNum,ak=j.PARAM.K_CL_NUM,aq={};var ap=function(at,ay,aw,au){if(!ay){return}var av="k"+at;aq[av]=ay;var ar=ay.length,ax=aw?ak:am;aq[av+"v"]=au?0:(ar>ax?(ar-ax):0);aq[av+"b"]=ar};var ao=function(){var ar=an.datas_day();ap(j.URLHASH.KD,ar);ap(j.URLHASH.KCL,ar,true);ap(j.URLHASH.YTD,an.datas_ytd(),false,true);ap(j.URLHASH.KW,an.datas_week());ap(j.URLHASH.KM,an.datas_month())};this.get=function(ar){return aq[ar]};this.set=function(ar,at){(typeof aq[ar]!=="undefined")&&(aq[ar]=at)};this.initState=ap;this.initDWMState=ao;ao()}f.prototype=new T();function f(aq,aD){var an=this;T.call(this);var al=aq,at=aD,av=false,ay,aA,ap=j.PARAM.DESIGNATE_RATE,ar=Math.max(ap,j.PARAM.SLOW_RATE),am=function(){n(j.TIP.ERR,5)},az=function(aE){aB&&aB.rl(aE,az);ak&&ak.rl(aE,az);an.re(aE,at)};var aw,ao,aB,ak;this.hq=function(){return aw};this.iHq=function(){return ao};this.t=function(){return aB};this.k=function(){return ak};var ax=new function(){var aE=function(){!aB&&(aB=new o(aw,al,ao.ihqObj.l5,av,at))};this.initT1=function(){if(av){n(j.TIP.NO_T_DATA,2);return}n(j.TIP.LOAD_DATA);aE();aB.al(S.T1_DATA_LOADED,az);aB.initT1()};this.initT5Y=function(){if(av){n(j.TIP.NO_T_DATA,2);return}n(j.TIP.LOAD_DATA);aE();aB.al(S.T5Y_DATA_LOADED,az);aB.initT5Y()};this.init=function(){(at==j.URLHASH.FAKE_T5||at==j.URLHASH.CL)?this.initT5Y():this.initT1()}};var au=new function(){var aE=function(){!ak&&(ak=new t(aw,ao,al))};this.initDayK=function(){n(j.TIP.LOAD_DATA);aE();ak.al(S.K_DATA_LOADED,az);ak.init()};this.initMinK=function(aF){n(j.TIP.LOAD_DATA);aE();ak.al(S.KMIN_DATA_LOADED,az);ak.initMinK(aF)};this.init=function(){(/^(5|15|30|60)$/.test(at))?this.initMinK(at):this.initDayK()}};var aC=function(aE){if(j.PARAM.updateRate<=0&&!aE){return}clearTimeout(aA);aA=setTimeout(aC,j.PARAM.updateRate);e(j.URL.getHqUrl().replace("$symbol",al),function(){var aF=window["hq_str_"+al];aw.update(aF);if(aw.hqObj.isDateChange){aB&&aB.newDayComes();ak&&ak.newDayComes();ay();return}if(aw.isTotalRe()){aB&&aB.reloadT1();return}if(aw.isUpdateTime()){aB&&aB.update();ak&&ak.update();ay();(j.PARAM.updateRate!=ap)&&(j.PARAM.updateRate=ap)}else{(ap>0)&&(j.PARAM.updateRate=ar)}},function(){})};this.setFs=function(aE){ay=aE};this.initT1=ax.initT1;this.initT5Y=ax.initT5Y;this.initDayK=au.initDayK;this.initMinK=au.initMinK;this.manualUpdate=function(){aC(true)};this.init=function(){e(j.URL.getHqUrl().replace("$symbol",(al+","+al+"_i")),function(){ao=new I(window["hq_str_"+al+"_i"]);var aE=window["hq_str_"+al];aw=new G(al,aE);if(ao.ihqObj.st!="1"){var aG,aF=false;switch(ao.ihqObj.st){case"0":aG=j.TIP.NO_RECORD;aF=true;break;case"2":aG=j.TIP.NOT_LISTED;aF=true;break;case"3":aG=j.TIP.DELISTED;break}n(aG);if(aF){return}}av=!aE||aE=="";if(at<=3){if(av||!("price" in aw.hqObj)){at=j.URLHASH.KD;au.init()}else{ax.init()}}else{au.init()}!av&&aC()},am)}}function d(al){var ao,am,aq=al,ak,ap,at,ar;var an=function(){at=j.DIMENSION.posX;ar=j.DIMENSION.posY;var au,av=j.DIMENSION.H_TIME_PART+j.DIMENSION.h_vol;if(aq){ak=j.DIMENSION.H_MA4K;au=j.DIMENSION.w_k;av+=j.DIMENSION.h_k}else{ak=0;au=j.DIMENSION.w_main;av+=j.DIMENSION.h_main}ao.style.width=au+"px";ao.style.height=av+"px";var aw=j.PARAM.getHd();switch(aw){case 0:break;case 1:aw=aj.hdpr;au*=aw;av*=aw;break;default:au*=aw;av*=aw;break}(ao.width!=au)&&(ao.width=au);(ao.height!=av)&&(ao.height=av);ao.style.top=(ar+ak)+"px";ao.style.left=at+"px"};ao=M("canvas");ao.style.position="absolute";ao.style.zIndex=j.PARAM.G_Z_INDEX;am=ao.getContext("2d");an();this.resize=an;this.visible=function(au){if(au){!ag(L,ao)&&L.appendChild(ao)}else{if(ag(L,ao)){L.removeChild(ao)}}};this.scale=function(){var au=j.PARAM.getHd();switch(au){case 0:return;case 1:au=aj.hdpr;break}au&&am.scale(au,au)};this.newStyle=function(av,au,aw){ap=am.strokeStyle=av;au&&am.beginPath();aw&&(am.lineWidth=aw)};this.clear=function(au){ao.width=ao.width;if(au){ap&&(am.strokeStyle!=ap)&&(am.strokeStyle=ap);am.beginPath()}};this.clearLimit=function(au,av){am.clearRect(au,0,av,ao.height);am.beginPath()};this.beginPath=function(){am.beginPath()};this.stroke=function(au){am.stroke()};this.save=function(){am.save()};this.translate=function(au,av){am.translate(au,av)};this.restore=function(){am.restore()};this.moveTo=function(au,av,aw){am.moveTo(au,av)};this.lineTo=function(au,av,aw){am.lineTo(au,av)};this.drawCandle=function(au,av,ax,az,aB,ay,aw){au=au+ay[0];(am.strokeStyle!=aw)&&(am.strokeStyle=aw);am.beginPath();if(ax-az==0){am.lineWidth=1;var aA=ay[1]*0.5;am.moveTo(au-aA,ax);am.lineTo(au+aA,ax)}else{(am.lineWidth!=ay[1])&&(am.lineWidth=ay[1]);am.moveTo(au,ax);am.lineTo(au,az)}am.stroke();if(av-aB!=0){am.lineWidth=1;am.moveTo(au,av);am.lineTo(au,aB);am.stroke()}};this.drawCandleC=function(au,aw,ay,ax,av){if(aw==ay){return}au=au+ax[0];(am.strokeStyle!=av)&&(am.strokeStyle=av);(am.lineWidth!=ax[1])&&(am.lineWidth=ax[1]);am.moveTo(au,aw);am.lineTo(au,ay)};this.drawCandleLineC=function(au,av,ax,az,aB,ay,aw){au=au+ay[0];(am.strokeStyle!=aw)&&(am.strokeStyle=aw);(am.lineWidth!=1)&&(am.lineWidth=1);if(ax==az){var aA=ay[1]*0.5;am.moveTo(au-aA,ax);am.lineTo(au+aA,ax)}if(av!=aB){am.moveTo(au,av);am.lineTo(au,aB)}};this.drawVStickC=function(au,ax,ay,av,aw){au=au+ay[0];(am.strokeStyle!=aw)&&(am.strokeStyle=aw);(am.lineWidth!=ay[1])&&(am.lineWidth=ay[1]);am.moveTo(au,ax);am.lineTo(au,ax+av)}}function h(aq){var an=aq,ap,ak,am,al,ao;this.resize=function(){al?(ap&&ap.resize()):(ak&&ak.resize())};this.setView=function(ar,at){am=at;al=ar;this.resize()};this.draw=function(){if(al){!ao&&ak&&ak.visible(false);!ap&&(ap=new K(an.t().tO()));ap.visible(true);ap.draw(am)}else{ao&&ap&&ap.visible(false);!ak&&(ak=new Y(an.k().kO()));ak.visible(true);ak.draw(am)}ao=al};this.newSets=function(){ak.setMaLines()}}K.prototype=new Z();function K(aq){Z.call(this);var an=j.datas.tDataLen,ar=function(){return j.DIMENSION.w_main<350?1:1.5},at=aq,ap=j.COLOR.T_P,ao=j.COLOR.T_AVG,al=j.COLOR.T_V,am=ar();var ak=new d(false);this.gArr=this.iArr=[ak];this.draw=function(aC){var ay=at.datas,av=at.poses,aA,aw,au,az=ay.length,aB=j.DIMENSION.w_main/az,ax=aB*0.5;az=at.dataLen;if(at.isTotalRedraw){au=0;ak.clear(true)}else{au=az-2;(au<0)&&(au=0);ax+=aB*au;ak.clearLimit(ax,aB)}ak.scale();ak.newStyle(ap,false,am);for(aw=au;aw<az;aw++){aA=av[aw];if(aw==au||at.days<=5&&aw%an==0){ak.moveTo(ax,aA[0],true)}else{ak.lineTo(ax,aA[0],true)}aA[12]=ax;ax+=aB}ak.stroke();if(aC!=j.URLHASH.CL){ax=aB*(0.5+au);ak.newStyle(ao,true,am);for(aw=au;aw<az;aw++){aA=av[aw];if(aw==au||at.days<=5&&aw%an==0){ak.moveTo(ax,aA[1],true)}else{ak.lineTo(ax,aA[1],true)}ax+=aB}ak.stroke()}ax=aB*(0.5+au);ak.save();ak.translate(0,j.DIMENSION.h_main+j.DIMENSION.H_TIME_PART);ak.newStyle(al,true,1);for(aw=au;aw<az;aw++){aA=av[aw];ak.moveTo(ax,j.DIMENSION.h_vol,false);ak.lineTo(ax,aA[2],true);ax+=aB}ak.stroke();ak.restore()};this.iTo=function(au){(au>=at.dataLen)&&(au=at.dataLen-1);ak.iTo(au)};this.resize=function(){for(var av=0,au=this.gArr.length;av<au;av++){this.gArr[av].resize()}am=ar()}}Y.prototype=new Z();function Y(av){Z.call(this);var ay=av,al=j.PARAM.minCandleNum,ax=j.PARAM.K_TO_CL_LIMIT,aw=j.URLHASH.KCL,ap=j.URLHASH.YTD,an=j.COLOR.K_CL,at=j.COLOR.K_RISE,am=j.COLOR.K_FALL,ar=j.COLOR.K_N,ak,ao;var au=function(){ao=j.MA.getWorkingMAArr()[1];ak=ao.length};var aq=new d(true);this.gArr=this.iArr=[aq];this.setMaLines=au;au();this.draw=function(aA){var aD=ay.poses,aU=ay.datas,aS=aU.length,az=j.DIMENSION.h_vol,aK=j.DIMENSION[(aA==aw||aA==ap)?"w_main":"w_k"]/Math.max(aS,al),aE=aK*0.5,aH=aK*0.6,aL=0;var aN=(aS>ax)||(aA==aw)||(aA==ap);var aG,aW,aO,aQ,aP,aB,aJ,aX,aC,aT,aR,aV,aF,aI;if(ay.isTotalRedraw){aC=0;aq.clear(aN)}else{aC=aS-2;(aC<0)&&(aC=0);aL+=aK*aC;aq.clearLimit(aL+aE,aK+aE)}aq.scale();if(aN){var aM;for(aQ=aC;aQ<aS;aQ++){aG=aD[aQ];aM=aG[0];if(aQ==aC){aq.newStyle(an,true,1.5);aq.moveTo(aL,aM)}else{aq.lineTo(aL,aM)}aG[12]=aL;aL+=aK}aq.stroke()}else{for(aJ=0;aJ<3;aJ++){switch(aJ){case 0:aB=at;break;case 1:aB=am;break;case 2:aB=ar;break}aL=aK*aC;aq.beginPath();for(aQ=aC;aQ<aS;aQ++){aG=aD[aQ];aP=aG[9];aT=~~(aL+0.5);aR=~~(aG[7]+0.5);aV=~~(aG[8]+0.5);(aP==aB)&&aq.drawCandleC(aT,aR,aV,[aE,aH],aP);(aJ==0)&&(aG[12]=aT+aE);aL+=aK}aq.stroke();aL=aK*aC;aq.beginPath();for(aQ=aC;aQ<aS;aQ++){aG=aD[aQ];aP=aG[9];aT=~~(aL+0.5);aR=~~(aG[7]+0.5);aV=~~(aG[8]+0.5);aF=~~(aG[3]+0.5);aI=~~(aG[4]+0.5);(aP==aB)&&aq.drawCandleLineC(aT,aF,aR,aV,aI,[aE,aH],aP);aL+=aK}aq.stroke()}}if(!aN){for(aO=0;aO<ak;aO++){aL=aE+aK*aC;aq.newStyle(ao[aO],true,1);for(aQ=aC;aQ<aS;aQ++){aG=aD[aQ];aq[aQ==aC?"moveTo":"lineTo"](aL,aG[5][aO],false);aL+=aK}aq.stroke()}}aq.save();aq.translate(0,j.DIMENSION.h_k+j.DIMENSION.H_TIME_PART);if(aN){aL=aK*aC;for(aQ=aC;aQ<aS;aQ++){aG=aD[aQ];aX=aG[2];if(aQ==aC){aq.newStyle(j.COLOR.T_V,true,1.5);aq.moveTo(aL,aX)}else{aq.lineTo(aL,aX)}aL+=aK}aq.stroke()}else{for(aJ=0;aJ<2;aJ++){switch(aJ){case 0:aB=at;break;case 1:aB=am;break}aL=aK*aC;aq.beginPath();for(aQ=aC;aQ<aS;aQ++){aG=aD[aQ];aX=aG[2];aP=aG[14];aT=~~(aL+0.5);(aP==aB)&&aq.drawVStickC(aT,aX,[aE,aH],az-aX,aP);aL+=aK}aq.stroke()}}aq.restore()}}function a(ao){var aC=ao,aS,aH,az,aZ,ax,aA,a5,aF,av,a3,al,aU,a6,ba,a4,aY,aK,aV=j.DIMENSION.H_MA4K,am,aq=j.COLOR.GRID,aG=j.COLOR.T_PREV,an=j.COLOR.TIME_S,ak=j.COLOR.K_EXT,aw=j.COLOR.PR_BACK,a0=12,a7=22,a2=60,aL=(a2>>1),aX=j.PARAM.NUM_T_P_L,aO=j.PARAM.minCandleNum,aN=j.URLHASH.KM,ay=j.URLHASH.KCL,aM=j.URLHASH.YTD,aT=j.URLHASH.K5,aW=j.URLHASH.K15,ar=j.URLHASH.K30,aD=j.URLHASH.K60;var aE,aI,aR,aQ;var a1=function(){a5.width=a5.width;aF.beginPath();aF.font=a0+"px "+j.STYLE.FONT_FAMILY;aF.textBaseline="top"};var au=function(){a3=M("span");a3.style.position="absolute";a3.style.border="1px solid "+aq;L.appendChild(a3);al=M("span");al.style.position="absolute";al.style.backgroundColor=aw;L.appendChild(al);a5=M("canvas");a5.style.position="absolute";a5.style.border="1px solid "+aq;aF=a5.getContext("2d");L.appendChild(a5);a3.style.zIndex=al.style.zIndex=a5.style.zIndex=j.PARAM.BG_Z_INDEX;aE=M("span");aI=M("span");aE.style.position=aI.style.position="absolute";aE.style.color=aI.style.color="#111";aE.style.border=aI.style.border="1px solid "+ak;aE.style.cursor=aI.style.cursor="default";aE.style.zIndex=aI.style.zIndex=j.PARAM.G_Z_INDEX+1000;aE.style.backgroundColor=aI.style.backgroundColor="rgba(255, 255, 255, 0.8)"};var aB=function(){aU=j.DIMENSION[(aH||aZ||az)?"w_main":"w_k"];(a5.width!=aU-1)&&(a5.width=aU-1);a3.style.width=(aU-1)+"px";al.style.width=aU+"px"};var aP=function(){aB();am=aU/a2;a6=j.DIMENSION.getStageH(),ba=j.DIMENSION.h_main,a4=j.DIMENSION.h_k,aY=j.DIMENSION.H_TIME_PART,aK=j.DIMENSION.h_vol;aR=j.DIMENSION.posX,aQ=j.DIMENSION.posY;(a5.height!=a6-1)&&(a5.height=a6-1);a3.style.height=(aY-1)+"px";a3.style.top=(aQ+ba)+"px";al.style.height=(aK-1)+"px";al.style.top=(aQ+ba+aY+1)+"px";a5.style.top=aQ+"px";a5.style.left=a3.style.left=al.style.left=aR+"px";(aF.strokeStyle!=aq)&&(aF.strokeStyle=aq)};au();aP();this.resize=aP;this.setView=function(bb,bc){aS=bc;aH=bb;az=(aS==aM);aZ=(aS==ay);aB();(bb||az||aZ)?ag(L,aE)&&(L.removeChild(aE),L.removeChild(aI)):(!ag(L,aE))&&(L.appendChild(aE),L.appendChild(aI))};this.drawFrame=function(bg,be){a1();var bh;if(bg){var bk=false;if(be>=365){be=Math.round(be/365);bk=true}var bi=aX-1,bn=bi*0.5-1;var bb=ba/bi;var bf=bb;for(bh=0;bh<bi-1;bh++){if(!bk&&bh==bn){aF.strokeStyle=aG}else{if(aF.strokeStyle!=aq){aF.strokeStyle=aq}}ap(0,aU,bf,true);bf+=bb}aA||(aA=aC.t().tO());if(!aA){return}var bl;if(be<=2){bl=4}else{if(be==3){bl=6}else{if(be>=3&&be<=5){bl=be}}}for(var bm=aU/bl,bc=bm,bh=1;bh<bl;bh++){ap(0,a6,bc,false,[ba,aY]);bc+=bm}at(aA.dates(),bk?false:aA.days>1)}else{ax||(ax=aC.k().kO());if(!ax){return}aF.strokeStyle=aq;var bj=ax.labelPriceCount;var bd=a4/bj;for(bh=0;bh<bj;bh++){ap(0,aU,bh*bd+aV,true)}a9()}};var aJ=function(bc,bd){if(bc<aL||(av>0&&bc<=av+a2)||bc>aU-aL){return}ap(aV,a6,bc,false,[ba,aY]);aF.fillStyle!=an&&(aF.fillStyle=an);var bb=aF.measureText(bd).width;aF.fillText(bd,bc-(bb>>1),ba);av=bc};function a9(){av=-1;var bv=ax.datas,bt=bv.length;var bi;if(aS==aN||aS==ay||bt>828){bi="y"}else{if(aS==aT||aS==aW||aS==ar||aS==aD){bi=aS==aD?"w":"d"}else{bi="m"}}var bg=ax.poses;var bm=aU/Math.max(bt,aO),bn=bm>>1,bh,bd;var br=aU/(bm*a7),bw=Math.ceil(br/am);var bk,bf=-1,bx,bo=0,bb,bp,bq,bl=-1,be=0,bc,by;for(var bu,bj,bs=0;bs<bt;bs++){bu=bv[bs];bj=bg[bs];bq=bu.date;bb=bq.getMonth();bp=bq.getFullYear();switch(bi){case"d":bx=bq.getDate();if(bx!=bo){aJ(bn,[bp,bb+1,bx].join("/"))}bo=bx;break;case"w":bk=bq.getDay();if(bk<bf){aJ(bn,[bp,bb+1,bq.getDate()].join("/"))}bf=bk;break;default:case"m":if(bb!=bl&&!(bb%bw)){aJ(bn,[bp,bb+1].join("/"))}bl=bb;break;case"y":if(bp!=be){aJ(bn,bp)}be=bp;break}if(!az&&!aZ){bh=bn+aR;if(bu.isH){aE.innerHTML=bu.high.toFixed(2);bd=aE.offsetWidth;(bn+bd>aU)&&(bh-=bd);aE.style.left=bh+"px";aE.style.top=(aQ+bj[3]+aV-3)+"px"}if(bu.isL){aI.innerHTML=bu.low.toFixed(2);bd=aI.offsetWidth;(bn+bd>aU)&&(bh-=bd);aI.style.left=bh+"px";bc=aQ+bj[4]+aV;by=a4-bc+aQ-aV;(by<0)&&(bc+=by+3);aI.style.top=bc+"px"}}bn+=bm}}function at(bc,bh){(aF.fillStyle!=an)&&(aF.fillStyle=an);for(var bg,bd,bb,bf=0,be=bc.length;bf<be;bf++){bg=bc[bf];bd=aF.measureText(bg).width;if(bh){bb=(bf+0.5)*aU/be-bd*0.5}else{bb=bf*aU/(be-1);if(bf==0){}else{if(bf<be-1){bb-=bd*0.5}else{bb-=bd}}}aF.fillText(bc[bf],bb,ba)}}function a8(bb,bd,bc,be,bf){aF.beginPath();if(be){aF.moveTo(bb,bc);aF.lineTo(bd,bc)}else{aF.moveTo(bc,bb);if(bf){aF.lineTo(bc,bf[0]);aF.moveTo(bc,bf[0]+bf[1])}aF.lineTo(bc,bd)}aF.stroke()}function ap(bc,be,bd,bf,bg){aF.beginPath();var bb=2;if(bf){while(bc<be){aF.moveTo(bc,bd);bc+=bb;aF.lineTo(bc,bd);bc+=bb}}else{while(bc<be){if(bg&&bc>=bg[0]&&bc<bg[0]+bg[1]){bc+=bg[1];continue}aF.moveTo(bd,bc);bc+=bb;aF.lineTo(bd,bc);bc+=bb}}aF.stroke()}}function m(ar,au,aL,aA){var aC=j.datas.tDataLen,aD=ar,bk=au,aH=aL,bj=aA,ay=j.URLHASH.KCL,aq=j.URLHASH.YTD,av=aD.hq().hqObj.digits,bl,aG,aI,a1,be,az,aM=j.PARAM.allowV,a0,aV,aZ,a9,a8,aF,bc,a3,bo,bf,a6,aS,a5,bd,bn;var a2,at,a7,aQ,ao,ax,al,ak;var aY=11,aO=j.COLOR.K_N,aE=j.COLOR.K_RISE,aT=j.COLOR.K_FALL,aR=j.PARAM.TOUCH_THRESHOLD,aU=j.PARAM.minCandleNum,ba=j.PARAM.NUM_T_P_L;var an=function(){ak.style.display=(aI||a1==ay||a1==aq)?"none":""};var bh=function(bp){a2.style.display=aQ.style.display=bd.style.display=bn.style.display=a7.style.display=at.style.display=bp?"":"none"};var aX=false;var bm={isM:false,isTch:false,isP:false,isGd:false,tCount:null,tXOff:-1,isPv:false,lastIy:null,vP:function(bs){var bt,br;if(bs.changedTouches){var bq=A.getTarget(bs),bp=c.pageX(bq);bt=bs.changedTouches[0].pageX-bp;br=bs.changedTouches[0].pageY-aZ}else{bt=bs.offsetX||bs.layerX;br=bs.offsetY||bs.layerY}bh(true);bl=Math.floor(bt*az/a8);(bl<0)&&(bl=0);aw(false,bt,br)},vH:function(br){if(aM&&br.touches){var bq=br.touches[0].clientY;!this.lastIy&&(this.lastIy=bq);var bp=this.lastIy-bq;this.lastIy=bq;if(Math.abs(bp)>3){window.scrollBy(0,7*bp/Math.abs(bp));return}}if(this.isGd){return}this.isGd=true;bh(false);var bs=(br.changedTouches?br.changedTouches[0].clientX:br.layerX)||br.offsetX;aH(bs)},tR:function(){clearTimeout(this.tCount);this.isGd=this.isPv=false;bh(false)},gR:function(){this.tR();this.tXOff=-1},tCheck:function(bp){this.tR();this.tCount=setTimeout(function(){bm.isPv=true;bm.vP(bp)},aR)},mU:function(){this.isM=this.isP=this.isGd=false},mD:function(){this.isM=this.isP=true},mO:function(){this.isM=this.isP=this.isGd=aX=false;bh(false);aw(true)},mM:function(bp){if(this.isTch){return}aX=true;this.isP?this.vH(bp):this.vP(bp)},tE:function(bp){this.tR();this.isTch=aX=false;if(!bp){return}(bp.touches.length==2)&&this.gR();aw(true)},tM:function(bs){if(bs.touches.length==1){clearTimeout(this.tCount);this.isPv?this.vP(bs):this.vH(bs)}else{if(bs.touches.length==2){var br=bs.touches[0],bq=bs.touches[1];if(this.tXOff>=0){var bp=Math.abs(br.clientX-bq.clientX);if(bp!=this.tXOff){bj(bp<this.tXOff)}}this.tXOff=Math.abs(br.clientX-bq.clientX)}}},tS:function(bp){this.tE(null);this.isTch=aX=true;this.lastIy=bp.touches[0].clientY;switch(bp.touches.length){case 1:this.tCheck(bp);break;case 2:this.gR();break}},handleEvent:function(bp){switch(bp.type){case"mouseup":this.mU();break;case"mousedown":this.mD();break;case"mouseout":this.mO();break;case"mousemove":this.mM(bp);break;case"touchend":this.tE(bp);break;case"touchmove":this.tM(bp);break;case"touchstart":this.tS(bp);break}}};am();bg();a4();aJ();aW();bh(false);this.resize=aW;this.setView=function(bp,bq){aI=bp;a1=bq;aB();aN();an()};this.rangeRenew=function(bs,bt){if(bs){bi()}else{aG=be.datas.length}az=Math.max(aG,aU);var br=be.prevclose,bq=aI?ba:(be.labelPriceCount+1),bp;if(aI||a1==ay){bp=V.pa(be.minPrice,be.maxPrice,br,bq);aP(be.minPrice,be.maxPrice,br,!aI,bq)}else{bp=(a1==aq)?V.pa(be.labelMinP,be.labelMaxP,br,bq):[];aP(be.labelMinP,be.labelMaxP,br,!aI,bq)}ap(bp);aK(be.labelMaxVol);bt&&aw(true)};function bi(){be=aI?aD.t().tO():aD.k().kO();aG=be.datas.length;aw(true)}function aw(bv,bq,by){(!aX&&bv)&&(bl=Number.MAX_VALUE);var bx,bG,bu,bw,bB,bs,bA,bC=aO;if(aI){(bl>=be.dataLen)&&(bl=be.dataLen-1);bx=be.marks[bl];bG=be.datas[bl];bu=be.poses[bl];bB=bx[0];bs=bx[3];var bt=a1==j.URLHASH.CL?bG.date:be.datas[Math.floor(bl/aC)*aC].date;bA=bt.getFullYear()+"/"+ai.zp(bt.getMonth()+1)+"/"+ai.zp(bt.getDate())+" "+(bG.time||"");bw=[bA,"价:",bB,"均:",bx[1],"幅:",bs,"量:",bx[2]];if(bG.percent>0){bC=aE}else{if(bG.percent<0){bC=aT}}at.style.color=a2.style.color=bC;a2.innerHTML=bB;at.innerHTML=bs}else{(bl>=aG)&&(bl=aG-1);bx=be.marks[bl];bG=be.datas[bl];bu=be.poses[bl];bs=bu[13];bA=bG.day+" "+(bG.time||"");switch(a1){case aq:bw=[bA,"价:",bx[0],"年涨幅:",bx[8],"量",bx[2]];break;case ay:bw=[bA,"价:",bx[0],"区间涨幅:",bx[8],"量:",bx[2]];break;default:bw=[bA,"开:",bx[5],"高:",bx[1],"低:",bx[4],"收:",bx[0],"幅:",bx[3],"量:",bx[2]];break}a2.innerHTML=bG.close.toFixed(2);if(a1==ay||a1==aq){if(bs>0){bC=aE}else{if(bs<0){bC=aT}}at.style.color=a2.style.color=bC;at.innerHTML=bx[8]}else{a2.style.color=bC;bb(bx);at.style.display="none"}}R.innerHTML=bw.join("");var br=bu[12],bE=a0+br;a7.innerHTML=bA;var bD=a7.offsetWidth>>1;var bp=bE-bD;if(bp<a0){bp=a0}else{var bF=br+bD-a8;bF>0&&(bp-=bF)}a7.style.left=bp+"px";bn.style.left=bE+"px";var bz=aZ+bu[0];!aI&&(bz+=a9);bd.style.top=bz+"px";at.style.top=a2.style.top=(bz-aY+3)+"px";aQ.style.top=(aZ+bo+bu[2])+"px";aQ.innerHTML=bx[2]}function bb(bq){var bp=ak.getElementsByTagName("span"),bw;var bv=j.MA.getWorkingMAArr(),bt=bv[0],bu=bv[1],bs=bt.length;while(bp.length<bs){bw=M("span");ak.appendChild(bw)}while(bp.length>bs){ak.removeChild(bp[0])}for(var br=0;br<bs-1;br++){bw=bp[br];bw.style.color=bu[br];bw.innerHTML=" MA"+bt[br]+":"+bq[6][br]}}function aP(bB,by,bz,br,bw){var bu=ao.getElementsByTagName("span"),bp,bA=bw-1;while(bu.length<bw){bp=M("span");bp.style.display="block";bp.style.width=(a0-aV-3)+"px";ao.appendChild(bp)}while(bu.length>bw){ao.removeChild(bu[0])}var bs,bv,bx,bt,bq;if(br){bt=bf/bA,bq=j.COLOR.K_P;for(bs=0;bs<bw;bs++){bv=(by-bs*(by-bB)/bA);if(a1==ay||a1==aq){bq=bv==bz?aO:bv>bz?aE:aT}bp=bu[bs];bp.style.height=bt+"px";bp.style.color=bq;bp.innerHTML=bv==0?0:bv.toFixed(2)}}else{bt=Math.round(bo/bA);for(bs=0;bs<bw;bs++){bv=by-bs*(by-bB)/bA;bx=bv.toFixed(av);bq=aE;if(bB==bz){bq=(bs==bA)?aO:aE}else{if(by==bz){bq=(bs==0)?aO:aT}else{bq=bv==bz?aO:bv>bz?aE:aT}}bp=bu[bs];bp.innerHTML=bx;bp.style.height=(bs==bA?aY:bt)+"px";bp.style.color=bq}}}function ap(bq){var bp=al.getElementsByTagName("span"),br=bq.length,bw;while(bp.length<br){bw=M("span");bw.style.display="block";al.appendChild(bw)}while(bp.length>br){al.removeChild(bp[0])}for(var bu=(aI?bo:bf)/(br-1),bs,bv,bt=0;bt<br;bt++){bv=(bq[bt]*100).toFixed(2)+"%";bs=aT;if(bq[bt]>-0.000001&&bq[bt]<0.000001){bs=j.COLOR.K_P;bv="0.00%"}else{if(bq[bt]>0){bs=aE;bv=" "+bv}}bw=bp[bt];bw.style.color=bs;bw.innerHTML=bv;bw.style.height=bu+"px"}}function aK(bx){var bv=2;var bw=ax.getElementsByTagName("span"),bp,by=bv-1;while(bw.length<bv){bp=M("span");bp.style.display="block";bp.style.width=(a0-aV-3)+"px";ax.appendChild(bp)}while(bw.length>bv){ax.removeChild(bw[0])}for(var bu=aS/by,br,bt,bq,bs=0;bs<bv;bs++){bt=bx-bs*bx/by;if(bx>1000000000000){br=(bt/1000000000000).toFixed(0);(bs==by)&&(br="万亿")}else{if(bx>1000000000){br=(bt/100000000).toFixed(0);(bs==by)&&(br="亿")}else{if(bx>10000000){br=(bt/1000000).toFixed(0);(bs==by)&&(br="百万")}else{if(bx>100000){br=(bt/10000).toFixed(0);(bs==by)&&(br="万")}else{if(bx<=1){br=bt.toFixed(0);(bs==by)&&(br="0")}else{br=(bt).toFixed(0);(bs==by)&&(br="0")}}}}}bp=bw[bs];bp.innerHTML=br;(bs<by)&&(bp.style.height=(bu-aY/bv)+"px")}}function am(){a5=M("canvas");a5.style.position="absolute";a5.style.zIndex=j.PARAM.I_Z_INDEX;var bq=r.istd?["touchend","touchmove","touchstart"]:["mousedown","mouseup","mousemove","mouseout"];for(var br=0,bp=bq.length;br<bp;br++){A.addHandler(a5,bq[br],bm)}L.appendChild(a5)}function bg(){ao=M("div");ax=M("div");al=M("div");ak=M("div");ao.style.position=ax.style.position=al.style.position=ak.style.position="absolute";ao.style.zIndex=ax.style.zIndex=al.style.zIndex=ak.style.zIndex=j.PARAM.BG_Z_INDEX;ao.style.fontSize=ax.style.fontSize=al.style.fontSize=ak.style.fontSize=aY+"px";ao.style.textAlign=ax.style.textAlign="right";ax.style.color=j.COLOR.V_S;ak.style.lineHeight=(aY+5)+"px";L.appendChild(ao);L.appendChild(ax);L.appendChild(al);L.appendChild(ak)}function a4(){bn=M("div");bd=M("div");bn.style.width=bd.style.height="1px";bn.style.backgroundColor=bd.style.backgroundColor=j.COLOR.IVH_LINE;bn.style.position=bd.style.position="absolute";bn.style.zIndex=bd.style.zIndex=j.PARAM.G_Z_INDEX+1;L.appendChild(bn);L.appendChild(bd)}function aJ(){a2=M("span");aQ=M("span");at=M("span");a7=M("span");aQ.style.textAlign=a2.style.textAlign=at.style.textAlign=a7.style.textAlign="center";aQ.style.position=a2.style.position=at.style.position=a7.style.position="absolute";aQ.style.fontSize=a2.style.fontSize=at.style.fontSize=a7.style.fontSize=aY+"px";aQ.style.background=a2.style.background=at.style.background=a7.style.background=j.COLOR.F_BG;aQ.style.zIndex=a2.style.zIndex=at.style.zIndex=j.PARAM.BG_Z_INDEX+1;a7.style.zIndex=j.PARAM.G_Z_INDEX+2;a7.style.minWidth="110px";a7.style.color=j.COLOR.TIME_F;aQ.style.color=j.COLOR.V_F;a7.style.lineHeight=a7.style.height=a2.style.lineHeight=a2.style.height=aQ.style.lineHeight=aQ.style.height=at.style.lineHeight=at.style.height=(aY+5)+"px";L.appendChild(aQ);L.appendChild(a7);L.appendChild(a2);L.appendChild(at)}function aB(){a3=j.DIMENSION.getStageH();a8=(aI||a1==ay||a1==aq)?j.DIMENSION.w_main:j.DIMENSION.w_k;a5.style.width=a8+"px";bd.style.width=a8+"px";al.style.left=(a0+a8+1)+"px";at.style.left=(a0+a8+1)+"px"}function aN(){var bq=aZ,bp=a3;!aI&&(bq+=a9,bp-=a9);a5.style.top=bn.style.top=bq+"px";a5.style.height=bp+"px";bn.style.height=bp+"px";ao.style.top=al.style.top=(bq-aY+5)+"px"}function aW(){a0=j.DIMENSION.posX;aZ=j.DIMENSION.posY;aV=j.DIMENSION.lbX;aF=j.DIMENSION.getLeftW();bc=j.DIMENSION.RIGHT_W;a9=j.DIMENSION.H_MA4K;bo=j.DIMENSION.h_main;bf=j.DIMENSION.h_k;a6=j.DIMENSION.H_TIME_PART;aS=j.DIMENSION.h_vol;aB();aN();a5.style.left=bd.style.left=a0+"px";ao.style.left=ax.style.left=j.DIMENSION.lbX+"px";ax.style.top=(aZ+bo+aY)+"px";ak.style.top=aZ+"px";a2.style.width=aQ.style.width=ak.style.left=a0+"px";at.style.width=bc+"px";a7.style.top=(aZ-a6-1)+"px"}}function U(aF){var au=aF,ax,ap,av,az,aw,aB,ao=9,aE=j.PARAM.K_CL_NUM+1,aC=j.DIMENSION.w_main,aD=j.URLHASH.KCL,ar,ay=j.PARAM.minCandleNum,an=j.PARAM.K_TO_CL_LIMIT,aA,aq,am=0;var at;var al={isTch:false,pX:null,sEh:function(aI){var aJ=r.istd?["touchmove","touchend"]:["mousemove","mouseup","mouseout"],aH=aJ.length,aG;for(aG=0;aG<aH;aG++){A.removeHandler(L,aJ[aG],this)}if(aI){for(aG=0;aG<aH;aG++){A.addHandler(L,aJ[aG],this)}}},onD:function(aG){if(!aB||!aA){return}al.pX=aG;aw=az-av;ar=aC/aw;al.sEh(true)},onM:function(aI){if(ax){return}var aJ=(aI.changedTouches?aI.changedTouches[0].clientX:aI.layerX)||aI.offsetX,aH=aJ-this.pX;if(Math.abs(aH)<ar){return}this.pX=aJ;var aG=Math.floor(aH*aw/aC);av-=aG;az-=aG;if(az>=aq){az=aq;av=az-aw}if(av<0){av=0;az=aw}ak()},tE:function(){this.isT=false;this.sEh(false)},tM:function(aG){this.isTch=true;this.onM(aG)},mE:function(){this.sEh(false)},mM:function(aG){if(this.isTch){return}this.onM(aG)},handleEvent:function(aG){switch(aG.type){case"touchend":this.tE();break;case"touchmove":this.tM(aG);break;case"mouseout":case"mouseup":this.mE();break;case"mousemove":this.mM(aG);break}}};this.is5T=false;this.setCtrlCbs=function(aG){at=aG};this.setView=function(aG,aH){ax=aG;ap=aH;if(ax){aA=au.t().tState();if(this.is5T){av=0;az=5}else{if(ap==5){av=4;az=5}else{av=aA["t"+ap+"v"];az=aA["t"+ap+"b"]}}}else{aA=au.k().kState();av=aA.get("k"+ap+"v");az=aA.get("k"+ap+"b");aq=aA.get("k"+ap).length;(az+ao>aq)&&(az=aq)}aB=ax?Boolean(ap!=1):Boolean(az-av>=ay);ak(true)};this.resize=function(){aC=j.DIMENSION.w_main;ar=aC/aw;ak()};this.update=function(aH){var aG=false;if(ax){aG=true}else{if(aH||++am%2==0){am=0;aq=aA.get("k"+ap).length;(az+ao>aq)&&(az=aq);aG=(aH||(az>=aq&&az-av<aE))}}if(aG){ak(false,true)}};this.zoomView=function(aG){if(ax){}else{var aH=Math.ceil((az-av)*0.1);if(aG){if(ap==aD){if(az-av+aH>=aq>>1){return}}else{if(az-av+aH>=an){return}}if(av>0){((av-=aH)<0)&&(av=0)}else{if(az<aq){((az+=aH)>aq)&&(az=aq)}else{return}}}else{if(ap==aD){if(av+an>=az){return}}else{if(av+ay>=az){return}}((av+=aH)>=az-ay)&&(av=az-ay)}ak()}};this.globalDrag=al.onD;function ak(aG,aH){if(ax){aA["t"+ap+"v"]=av;aA["t"+ap+"b"]=az}else{aA.set("k"+ap+"v",av);aA.set("k"+ap+"b",az)}at(av,az,aG,aH)}}function af(aP){var aw=aP,ar=[],at,am,ax,al,au,aH,aq,aE,ao,an;this.__id=5;this.onTabSelected=function(aT,aR,aS,aQ){if(!al){return}aq=aT;this.__id=aT;aE=aR;ao=al.is5T=aS;an=(aq==j.URLHASH.YTD);au=aQ||0;aD();q(aE||an);W(aE||an,aq)};this.zoom=aO;this.resize=function(){for(var aR=0,aQ=ar.length;aR<aQ;aR++){ar[aR].resize()}};this.newSets=function(){aw.k().calcAllMA();at.newSets();al.update(true)};var aL=function(aQ){aq=(aQ==j.URLHASH.FAKE_T5||aQ==j.URLHASH.TS)?j.URLHASH.T5:aQ;aE=aQ<=3;ao=aQ==j.URLHASH.FAKE_T5;an=(aq==j.URLHASH.YTD);q(aE||an);W(aE||an,0)};var aJ=function(){aF(false,true);aG();al.is5T=ao;aA()};function aN(aR,aQ){aL(aQ);aJ()}function aK(aQ){aF(false);aD()}function aM(){al&&al.update()}function aD(){var aQ=false;if(aE){if(aw.t()&&aw.t().tO()){if(aq==j.URLHASH.CL){aw.t().tdy()&&(aQ=true)}else{if(ao){aw.t().td5()&&(aQ=true)}else{aQ=true}}}if(!aQ){if(ao||(aq==j.URLHASH.CL)){aw.al(S.T5Y_DATA_LOADED,aK);aw.initT5Y()}else{aw.al(S.T1_DATA_LOADED,aK);aw.initT1()}}}else{if((aq==j.URLHASH.KD||aq==j.URLHASH.KW||aq==j.URLHASH.KM||aq==j.URLHASH.KCL)){aH=!(au<1)}else{aH=false}if(!aH&&aw.k()&&aw.k().kState()&&aw.k().kState().get("k"+aq)){aQ=true}else{if(aH){}else{if(aq==j.URLHASH.K5||aq==j.URLHASH.K15||aq==j.URLHASH.K30||aq==j.URLHASH.K60){aw.al(S.KMIN_DATA_LOADED,aK);aw.initMinK(aq)}else{aw.al(S.K_DATA_LOADED,aK);aw.initDayK()}}}}aQ&&aA()}function aA(){for(var aR=0,aQ=ar.length;aR<aQ;aR++){ar[aR].setView(aE,aq)}at.draw();ax.rangeRenew(true);n()}function aG(){aC();az();ak();aB()}function aC(){am=new a(aP);ar[ar.length]=am}function az(){at=new h(aw);ar[ar.length]=at}function aI(){}function ak(){ax=new m(aw,av,ay,aO);ar[ar.length]=ax}function av(aR,aQ){}function ay(aQ){!aE&&!an&&al.globalDrag(aQ)}function aO(aQ){al.zoomView(aQ)}function aB(){al=new U(aw);ar[ar.length]=al;al.setCtrlCbs(ap)}function ap(aR,aS,aQ,aV){var aU=0,aT;if(aE){aU=aS-aR;if(aq==j.URLHASH.T5){(aw.t().td5())&&(aT=aw.t().td5()[aR][0].date);!aT&&(aT=aw.hq().hqObj.date)}else{if(aq==j.URLHASH.CL){switch(aU){case 1:aU=365;break;case 2:aU=665;break;case 3:aU=965;break}if(!aw.t().tdy()){return}aT=aw.t().tdy()[Math.floor(aR*aw.t().tdy().length/3)].date}}aw.t().setRange(aU,aT,aV)}else{aT="k"+aq;aw.k().setRange(aT,aR,aS,aV,aq)}am.drawFrame(aE,aU);if(!aQ){at.draw();ax.rangeRenew(false,aV)}}function aF(aQ,aS){var aR=aS?aN:aK;aw[aQ?"al":"rl"](S.T1_DATA_LOADED,aR);aw[aQ?"al":"rl"](S.T5Y_DATA_LOADED,aR);aw[aQ?"al":"rl"](S.K_DATA_LOADED,aR);aw[aQ?"al":"rl"](S.KMIN_DATA_LOADED,aR)}aw.setFs(aM);aF(true,true)}return new function(){var ao=this,ak,am,ay,an,aq,aC;var al=w||{};var ap=function(aH){if(!aH||ai.trim(aH)==""){return}aH=ai.trim(aH.toLowerCase());var aF=j.URLHASH.vi(aH),aE=aH.indexOf("t")==0,aG=(aF==j.URLHASH.FAKE_T5);aE&&(aF!=j.URLHASH.CL)&&(aF=j.URLHASH.T5);an&&an.onTabSelected(aF,aE,aG)};var aA=new function(){var aE=function(aL,aI,aH,aJ,aG){var aK=z(aL);aK&&A.addHandler(aK,"click",function(aM){an.onTabSelected(aI,aH,aJ,aG)})};var aF=function(aG,aH){b[b.length]=aG;A.addHandler(z(aG),"click",function(aI){an.zoom(!aH)})};this.init=function(){var aH=true;if(al.btnids){var aI;for(var aG in al.btnids){aH=false;aI=al.btnids[aG];aG=String(aG).toLowerCase();switch(aG){case"t":aE(aI,j.URLHASH.T5,true);break;case"t5":aE(aI,j.URLHASH.T5,true,true);break;case"tcl":aE(aI,j.URLHASH.CL,true);break;case"cl":aE(aI,j.URLHASH.KCL);break;case"kd":aE(aI,j.URLHASH.KD);break;case"kw":aE(aI,j.URLHASH.KW);break;case"km":aE(aI,j.URLHASH.KM);break;case"k5":aE(aI,j.URLHASH.K5);break;case"k15":aE(aI,j.URLHASH.K15);break;case"k30":aE(aI,j.URLHASH.K30);break;case"k60":aE(aI,j.URLHASH.K60);break;case"zoomin":aF(aI,true);break;case"zoomout":aF(aI,false);break}}}if(aH){ao.showView=ap}}};var aB=function(){var aE=j.datas.mode=String(al.mode).toLowerCase()||"web";switch(aE){default:case"wap":(aE=="wap")&&au();aA.init();break}};var ar=function(){ak=(al.domid&&z(al.domid))||null;if(!ak){ak=M("div");document.body.appendChild(ak)}ak.style.position="relative";ak.style.fontSize="12px";R=M("div");R.style.height="12px";R.style.clear="both";L=M("div");L.style.position="relative";L.style.marginTop="7px";ak.appendChild(L);C=M("div");C.style.position="absolute";C.style.padding="5px 9px";C.style.borderRadius="3px";C.style.border="1px solid #000";C.style.backgroundColor="#ddd";C.style.color="#000";C.style.zIndex=j.PARAM.I_Z_INDEX-1;C.innerHTML=j.TIP.INIT;ak.appendChild(C);if(typeof al.nozoombtn!=="boolean"||!al.nozoombtn){aq=M("div");aC=M("div");Q[Q.length]=aq;Q[Q.length]=aC;aq.innerHTML="+";aC.innerHTML="-";aC.style.backgroundColor=aq.style.backgroundColor=j.COLOR.K_ZB;aC.style.fontSize=aq.style.fontSize="18px";aC.style.cursor=aq.style.cursor="pointer";aC.style.lineHeight=aq.style.lineHeight="20px";aC.style.width=aq.style.width="20px";aC.style.textAlign=aq.style.textAlign="center";aC.style.position=aq.style.position="absolute";aC.style.opacity=aq.style.opacity=0.5;aq.style.zIndex=aC.style.zIndex=j.PARAM.I_Z_INDEX+1;aC.style.display=aq.style.display="none";ak.appendChild(aq);ak.appendChild(aC);A.addHandler(aq,"click",function(aE){an.zoom(false)});A.addHandler(aC,"click",function(aE){an.zoom(true)})}};var aD=function(aI,aF){if(!aI||!aF){aI=ak.offsetWidth;aF=ak.offsetHeight-40;(aF>aI*0.7)&&(aF=aI*0.7)}j.DIMENSION.setStageW(aI);j.DIMENSION.setStageH(aF);var aE=j.DIMENSION.getStageW(),aG=j.DIMENSION.getStageH(),aH=j.DIMENSION.posY;R&&(R.style.fontSize=(aE<370?9:12)+"px");C&&(C.style.left=((aE-(C.offsetWidth||50))>>1)+"px",C.style.top=(aH+(aG>>1))+"px");if(aq&&aC){aC.style.left=(aE-25)+"px";aq.style.left=(aE-50)+"px";aC.style.top=aq.style.top="0px";if(an&&an.__id){if(an.__id=="365"){aC.style.left=(aE-25-40)+"px";aq.style.left=(aE-50-40)+"px"}}}};var aw=function(aF,aG,aE){aD(aG,aE);(aF||(aG&&aE))&&an&&an.resize()};var ax=function(){window.onresize=aw;aw()};var av=function(){var aE=al.rate;if(typeof aE==="number"&&aE>=0){j.PARAM.updateRate=j.PARAM.DESIGNATE_RATE=aE*1000}if(typeof al.allowetag==="boolean"){j.PARAM.allowEtag=al.allowetag}};var at=function(){al.hd&&j.PARAM.setHd(al.hd);if(typeof al.allowv==="boolean"){j.PARAM.allowV=al.allowv}al.theme&&j.COLOR.newTheme(al.theme);ar();(al.w>100&&al.h>9)?aD(al.w,al.h):ax();aB();av()};var az=function(){am=al.symbol||j.datas.s;am=String(am).toLowerCase();var aF,aE;aF=al.view||"";aE=j.URLHASH.vi(aF);ay=new f(am,aE);an=new af(ay);ay.init();ad(j.stat.i)};this.resizeH5=function(aF,aE){aw(null,aF,aE)};this.callFunc=function(aE){switch(aE){case B.ZOOM_IN:an&&an.zoom(false);break;case B.ZOOM_OUT:an&&an.zoom(true);break;case B.UPDATE:ay&&ay.manualUpdate();break}};at();az();function au(){j.PARAM.defaultCandleNum=50;j.PARAM.minCandleNum=20}}};
