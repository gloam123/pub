!function(p){function o(p,o){if(p+="",o+="",p===o)return 0;for(var n=p.split("."),e=o.split("."),a=Math.max(n.length,e.length),t=0;a>t;++t){var i=parseInt(n[t]||0,10),l=parseInt(e[t]||0,10);if(i>l)return 1;if(l>i)return-1}return 0}function n(l,d){function c(p,o){if(o=o||function(){},"undefined"==typeof b.clkFrom)return o();if(""===b.clkFrom)return o();var n={ct:4,cst:1,"package":b.packageName,clk_info:"h_l"+p,clk_from:b.clkFrom};if("undefined"!=typeof b.clkParams)for(var e in b.clkParams)n[e]=b.clkParams[e];
B&&B.log&&B.log.send?B.log.send(n,o):o()}function r(p){var o=p.downloadedPopupHeaderText,n=p.downloadedPopupBodyText,a=p.popupHeaderText;p.isLowVersion&&(p.lowVersionPopupHeaderText&&(o=p.lowVersionPopupHeaderText,a=p.lowVersionPopupHeaderText),p.lowVersionPopupBodyText&&(n=p.lowVersionPopupBodyText));var t={mask:y.mask,popup:{wrap:y.popup.wrap,container:y.popup.container,body:y.popup.body,cross:y.popup.cross,downloadButtons:'<div><a href="{download}" class="J_OpenAppOk openapp_popup_button primary"><span class="download_text">'+p.buttonText.download+'</span><span class="download_info">'+p.appInfoTextShort+"</span></a>"+(p.cancelUrl?'<a href="'+p.cancelUrl+'" class="J_OpenAppCancel openapp_popup_button">'+p.buttonText.cancel+"</a>":"")+"</div>",downloadingButtons:'<div><a href="#" class="J_OpenAppClose openapp_popup_button">返回搜索结果</a>'+(p.cancelUrl?'<a href="'+p.cancelUrl+'" class="J_OpenAppCancel openapp_popup_button">'+p.buttonText.cancel+"</a>":"")+"</div>",downloaded:'<div class="openapp_popup_text">'+(p.appIcon&&""!==p.appIcon?'<div class="openapp_popup_icon"><img src="'+p.appIcon+'" /></div>':"")+'<div class="openapp_popup_downloaded"><p class="header">'+o+'</p><p class="body">'+n+"</p></div></div>",undownload:'<div class="openapp_popup_text">'+(p.appIcon&&""!==p.appIcon?'<div class="openapp_popup_icon"><img src="'+p.appIcon+'" /></div>':"")+'<div class="openapp_popup_slogan">'+(p.popupTitleText.length>0?'<p class="title">'+p.popupTitleText+"</p>":"")+'<p class="header">'+a+"</p></div></div>",downloading:'<div class="openapp_popup_downloading"><div class="progress openapp_popup_sprite"><span class="icon openapp_popup_sprite"></span></div><div class="text"><p class="line1"><span>正在下载</span><span class="dots">...</span></p><p class="line2">安装：<span class="desc">下拉顶部通知栏，点击文件安装</span></p><p class="line3">启动：<span class="desc">安装完成点击“打开”</span></p></div></div>',render:function(o){var n=localStorage&&localStorage[e+p.packageName]&&"1"===localStorage[e+p.packageName],a=n?t.popup.downloaded:t.popup.undownload,i=a+t.popup.downloadButtons,l=t.popup.container,d=t.popup.body;
for(var c in o.result)i=i.replace(new RegExp("\\{"+c+"\\}","g"),o.result[c]);return l.removeClass("no_icon"),p.appIcon&&""!==p.appIcon||l.addClass("no_icon"),d.removeClass("downloading downloaded undownload"),d.addClass(n?"downloaded":"undownload"),l.html(i),y.popup.wrap},renderDownloading:function(){var p=t.popup.downloading+t.popup.downloadingButtons;if(t.popup.body.removeClass("downloaded undownload").addClass("downloading"),t.popup.container.html(p),t.popup.container.find(".openapp_popup_downloading .progress .icon").removeClass("openapp_popup_zoomin").addClass("openapp_popup_zoomin"),!y.popup.wrap.downloadingDotsInterval){var o=t.popup.container.find(".line1 .dots"),n="";
y.popup.wrap.downloadingDotsInterval=setInterval(function(){o.html(n),n+=".",n.length>3&&(n="")},350)}return y.popup.wrap}}};return t}function s(o,n){var e=r(o);0==p(".openapp_mask").length&&p("body").append(e.mask),e.mask.css({height:Math.max(p(window).height(),p("html").height())});var a=e.popup.render(n);return a.removeClass("openapp_popup_flydown").addClass("openapp_popup_flyup").appendTo("body"),e}function u(p){y.popup.wrap.removeClass("openapp_popup_flyup").addClass("openapp_popup_flydown"),setTimeout(function(){y.mask.remove(),y.popup.wrap.remove(),p&&p()
},200)}function f(o){if(b.appInfo){var n={status:200,statusMsg:"OK",result:b.appInfo};return o.call(null,n)}g?o.call(null,g):p.ajax({dataType:"jsonp",url:b.lastestAppUri+"&getapp="+b.packageName,success:function(p){g=p,o.call(null,g)},complete:function(){}})}function _(p,o){return-1==h[b.packageName]?o():void(1!=h[b.packageName]&&(h[b.packageName]=1,i.then(function(){t.api("sendintent",{intent:encodeURIComponent(b.openAppUri)},function(n){n&&0===n.error?(h[b.packageName]=2,p()):(h[b.packageName]=0,o())
})},function(){h[b.packageName]=-1,o()})))}function m(p,o){o.popup.renderDownloading(),window.localStorage&&(window.localStorage[e+p.packageName]=1)}function x(o,n){var e=o.packageName,t=o.openAppUri,i="http://127.0.0.1:6259/scandownloadfile?intent="+encodeURIComponent(t)+"&mcmdf="+a,l=n.result.rawsize;if("undefined"!=typeof l&&l>0){var d=n.result.download,c=d.match(/blink=(.+)$/);if(c&&c.length>=2){c=decodeURIComponent(c[1]);var r=c.match(/\/([^\/\?]+)\.apk(\?.*)?$/);r&&(r=r[1],i+="&apkfilelength="+l+"&apkfilename="+encodeURIComponent(r)+"&apkpackagename="+encodeURIComponent(e),p.ajax({dataType:"jsonp",url:i,timeout:1e3,success:function(){},error:function(){}}))
}}}var g,b,w,h=n.appCache||(n.appCache={}),k=function(){},v=p(d),A={packageName:"",openAppUri:"",appInfo:"",lastestAppUri:"//m.baidu.com/open/inapp?lcid=miia&callback=?",checkSuccess:void 0,checkError:void 0,popupTitleText:"",popupHeaderText:"",downloadingTitleText:"正在下载...",appInfoTextShort:"（{size}）",buttonText:{download:"立即下载",cancel:"继续访问网页"},downloadedPopupHeaderText:"你可能已下载了最新版",downloadedPopupBodyText:"请手动安装或再次下载",clickNext:k,popupNext:k,downloadNext:k,cancelNext:k,openAppNext:k,closeNext:k},y={mask:p('<div class="openapp_mask"/>').css({height:Math.max(p(window).height(),p("html").height())}).bind("touchmove",function(p){p.preventDefault(),p.stopPropagation()
}).bind("click",function(){u(function(){b.closeNext.call(v,v)})}),popup:{wrap:p('<div class="openapp_popup"><div class="openapp_popup_container"><div class="openapp_popup_line"><div class="openapp_popup_lineleft"></div><div class="openapp_popup_lineright"></div></div><div class="openapp_popup_title"><span href="#" class="openapp_popup_logo"></span>安装应用<a href="#" class="openapp_popup_close"></a></div><div class="openapp_popup_body"><div class="openapp_popup_context">{context}</div></div></div></div>').bind("touchmove",function(p){p.preventDefault(),p.stopPropagation()
})}};y.popup.body=y.popup.wrap.find(".openapp_popup_body"),y.popup.container=y.popup.wrap.find(".openapp_popup_context"),y.popup.cross=y.popup.wrap.find("a.openapp_popup_close").click(function(p){p.stopPropagation(),p.preventDefault(),c(3),u(function(){b.closeNext.call(v,v)})}),b=p.extend(A,l||{});var T=+new Date,N="packageName openAppUri appIcon cancelUrl popupHeaderText popupTitleText lowVersionPopupBodyText lowVersionPopupHeaderText downloadedPopupHeaderText downloadedPopupBodyText";if(p.each(N.split(" "),function(o,n){var e=b[n];
"undefined"!=typeof e&&p.isFunction(e)&&(b[n]=e(v))}),b.buttonText instanceof Array){var U={};b.buttonText.length>=2?(U.download=b.buttonText[1],U.cancel=b.buttonText[0]):1==b.buttonText.length&&(U.download=b.buttonText[0]),b.buttonText=U}b.cancelUrl&&!b.buttonText.cancel&&(b.buttonText.cancel="继续访问网页"),b.popupTitleText||(b.popupTitleText=b.popupHeaderText,b.popupHeaderText=""),w="http://127.0.0.1:6259/sendintent?intent="+window.encodeURIComponent(b.openAppUri)+"&mcmdf="+a+"&t="+T;var C=function(p){setTimeout(function(){p()
},0)};b.isLowVersion=!1,p.isFunction(b.checkVersion)?C=function(p,o){b.checkVersion(p,function(){b.isLowVersion=!0,o()})}:"undefined"!=typeof b.minVersion&&""!=b.minVersion&&(C=function(p,n){function e(){h[b.packageName]=0,n()}1!=h[b.packageName]&&(h[b.packageName]=1,i.then(function(){t.api("getpackageinfo",{packagename:b.packageName},function(n){if(n&&0===n.error){for(var a=n.package_infos,t=0;t<a.length;++t){var i=a[t],l=i.version_name,d=o(l,b.minVersion);if(d>=0)return h[b.packageName]=2,p()}b.isLowVersion=!0,e()
}else e()})},e))}),b.checkSuccess=b.checkSuccess||function(){b.openAppNext.call(null,v)},b.checkError=b.checkError||function(){f(function(o){var n=s(b,o);b.popupNext.call(null,v),n.clickBound||(n.popup.wrap.on("click",".J_OpenAppCancel",function(o){var n=p(this);o.preventDefault(),c(2,function(){u(function(){b.cancelNext.call(null,n),location.href=n.attr("href")})})}),n.popup.wrap.on("click",".J_OpenAppClose",function(p){c(3),p.preventDefault(),u(function(){b.closeNext.call(v,v)})}),n.popup.wrap.on("click",".J_OpenAppOk",function(p){x(b,o),m(b,n),p.preventDefault();
var e=this;b.downloadNext.call(null,v),c(1,function(){setTimeout(function(){window.location.href=e.href},10)})}),n.clickBound=!0)})},C(function(){_(b.checkSuccess,b.checkError)},function(){b.checkError()}),b.clickNext.call(null,v)}var e="search_inapp_pkg_",a="inapp_wisealaddin",t=null,i=function(){var o=new p.Deferred,n=0===location.protocol.indexOf("https"),e=n?"https://m.baidu.com/static/searchbox/openjs/mp.js":"http://static1.searchbox.baidu.com/static/searchbox/openjs/mp.js";if("undefined"!=typeof Box&&"undefined"!=typeof Box.moplus)o.resolve(Box.moplus);
else{var a=document.createElement("script");a.onload=function(){o.resolve(Box.moplus)},a.onerror=function(){o.reject()},a.src=e,p(function(){document.head.appendChild(a)})}return o.promise()}().then(function(){t=Box.moplus(),t.setMcmdf(a)});p(function(){if(!document.getElementById("openapp_style")){var o=".openapp_mask{width:100%;display:block;position:absolute;visibility:visible;background:rgba(0,0,0,.5);z-index:100;top:0;left:0}\n.openapp_popup{position:fixed;z-index:109;bottom:0;left:0;box-sizing:border-box;width:100%;background:rgba(0,0,0,0)}\n.openapp_popup_container{background-color:#fff;width:100%}\n.openapp_popup_flyup{-webkit-animation:openapp_anim_flyup 500ms}\n.openapp_popup_flydown{-webkit-animation:openapp_anim_flydown 500ms}\n.openapp_mask_fadein{-webkit-animation:openapp_anim_fadein 500ms}\n.openapp_mask_fadeout{-webkit-animation:openapp_anim_fadeout 500ms}\n@-webkit-keyframes openapp_anim_flyup{from{bottom:-250px}\nto{bottom:0}}\n@-webkit-keyframes openapp_anim_flydown{from{bottom:0}\nto{bottom:-250px}}\n@-webkit-keyframes openapp_anim_fadein{from{background:rgba(0,0,0,0)}\nto{background:rgba(0,0,0,.5)}}\n@-webkit-keyframes openapp_anim_fadeout{from{background:rgba(0,0,0,.5)}\nto{background:rgba(0,0,0,0)}}\n.openapp_popup_title{position:relative;height:40px;line-height:41px;font-size:17px;color:#262626;background-color:#f5f5f5;text-align:left;padding:0 10px;padding-left:31px;border-bottom:1px solid #eee}\n.openapp_popup_line{display:-webkit-box}\n.openapp_popup_lineleft{box-flex:1;background-color:#c00;height:2px;width:50%}\n.openapp_popup_lineright{box-flex:1;background-color:#0058d2;height:2px;width:50%}\n.openapp_popup_close{position:absolute;width:30px;padding-left:10px;height:41px;right:0;top:0;background:url(http://m.baidu.com/static/search/uibase/close2.png) no-repeat 13px 15px;background-size:12px 12px}\n.openapp_popup_logo{background:url(http://m.baidu.com/static/search/uibase/smalllogo.png) no-repeat 0 0;background-size:12px 12px;left:10px;top:14px;position:absolute;height:12px;width:12px}\n.openapp_popup_body{padding:18px 29px 23px;box-sizing:border-box;display:-webkit-box;-webkit-box-align:center}\n.openapp_popup_body.undownload,.openapp_popup_body.downloaded{min-height:196px}\n.openapp_popup_body.downloading{min-height:196px}\n.openapp_popup_body,.openapp_popup_body a{color:#262626}\n.openapp_popup_context{width:100%;font-size:14px}\n.openapp_popup_context p{margin:0;padding:0}\n.openapp_popup_text{display:-webkit-box}\n.openapp_popup_icon{width:48px;height:48px;margin-right:10px}\n.openapp_popup_icon img{max-width:100%}\n.openapp_popup_slogan,.openapp_popup_downloaded{text-align:left;-webkit-box-flex:1}\n.openapp_popup_downloaded{}\n.openapp_popup_context.no_icon .openapp_popup_slogan,.openapp_popup_context.no_icon .openapp_popup_downloaded{text-align:center}\n.openapp_popup_slogan .title,.openapp_popup_downloaded .header{padding-top:1px;margin-bottom:1px;font-size:20px}\n.openapp_popup_slogan .header,.openapp_popup_downloaded .body{font-size:17px;margin-left:1px}\n.openapp_popup_downloading{text-align:left;display:-webkit-box}\n.openapp_popup_downloading .progress{width:13px;height:55px;background-position:7px bottom;margin-right:14px;margin-top:3px;position:relative}\n.openapp_popup_downloading .progress .icon{width:18px;height:18px;position:absolute;left:1px;top:-1px;-webkit-transform-origin:center center}\n.openapp_popup_zoomin{-webkit-animation:openapp_anim_zoomin 500ms}\n@-webkit-keyframes openapp_anim_zoomin{0%{-webkit-transform:scale(0)}\n90%{-webkit-transform:scale(1.2)}\n100%{-webkit-transform:scale(1)}}\n.openapp_popup_downloading .text{-webkit-box-flex:1}\n.openapp_popup_downloading .line1{font-size:17px}\n.openapp_popup_downloading .line2,.openapp_popup_downloading .line3{margin-top:6px}\n.openapp_popup_downloading .desc{color:#777}\n.openapp_popup_button{display:block;box-sizing:border-box;margin-top:12px;border:1px solid #dbdee3;border-radius:2px;padding:8px 0;text-align:center;text-decoration:none}\n.openapp_popup_button.primary{background:#4a8be6;border:0;color:#fff;font-size:17px;padding:12px 0 11px}\n.openapp_popup_button .download_info{font-size:12px;margin-left:4px}\n.openapp_popup_sprite{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAADICAMAAAC3WLNTAAAAA3NCSVQICAjb4U/gAAAAmVBMVEX////////4/Pf0+vH39/fx+e7s9+jp9uTv7+/l9N7h89ve8dbe787V7szl5eXS7Mjf39/L6b/I6LvF57fB5bPW1ta64qq14KSt3ZvMzMyj2Y7Gxsaf14ma1YOU0nuUznOLz3GJzm6GzWqBy2V2xldzxVNrwkpowUZjvkBgvTxauzRUuC1StytOtiZKtCFHsx1EshlDsRk+rxL0K02QAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTIvMDkvMTO48tmmAAAB8UlEQVRYw+2X63KCMBCFXdQqWq03vKHUKxWtIHn/h2sSQgwYIlM7ttPZ88cQPrPJybKESkURKKroBTkVIPXJJogICQ+bcVWDsa72NiZSl00rj9HL6opkFXtWhmLDHMmNAlulAN5CotG5fYXoOFqGUnZK0fkcSYEOlqAAVqRQywSiwYoZEicBAba6u5fgwn9XDKI+xxpmX4eXgDUiNiuAiY5hRg54c8ShTQEDHd72OBQUMOLfPoeEkaEfZpllcnXikLxT3WkYEipQh/Zbu1tGQEmUNiRUnhHhDqlpjFrkGTFxYcFcSW+FERaMSZ5SGTLkUDXOURkmTLblavn8lmHR+A635A5PaM80w0QNkSrgyb71dJ3doTmkWWcFRTn3cU1fsM965tSA65MAr1rq1AL1mQL7oIn1kn046byWuSy+zHO1hV/aq0jx0GuApmKw0Ubv/mcYnnxvaGlrFGj0vUpXsmaiUCgUCoVCoX5QQz+K/KGZESfrpXEceYI3QL78YDBA8pQaPQrt5VeWARqk0MC0vEXCLMxG9Xfn867/b3Ol5s7uQ13Xrd2FLKeLq3uqLKd3H+qVWV1t5uDqcHV/T03HdZ3mXZeYjH42XSHTWE4KmQx1pR6FSoUrNfFSFpQzE19l+CrDcoir+51iP5thsX9asf8CmdGtoWLP1DAAAAAASUVORK5CYII=);background-size:18px 100px}";
p('<style type="text/css" rel="stylesheet" id="openapp_style" />').html(o).appendTo("head")}}),p.openapp=n,p.fn.openapp=function(o){var e=function(p){p.preventDefault(),n(o,this)},a=this;a.selector&&""!==a.selector?p("body").on("click",a.selector,e):a.click(e)}}(Zepto,window);