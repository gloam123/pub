/**
 * @fileoverview suda_map统计
 * @author wangfeng@staff.sina.com.cn
 * @date 2014-09-22
 */
(function(){var d=0,l=100,u=false,q="Apache",w="",k="",x="ustat",z="statuid",e="",b="",j=document.referrer,f=document.URL,h="http://beacon.sina.com.cn/b.gif";if(j==""){j="newpage"}function c(A){var B=0;B=A.indexOf("#");if(B>0){return A.substring(0,B)}else{return A}}function a(B){var D=0;var A=0;var C=B;while(1){D=C.indexOf("<");A=C.indexOf(">",D);if(D>=0&&A>=0&&A>D){C=C.substring(0,D)+C.substring(A+1,C.length)}else{break}}return C}function g(){if(""!=w){return w}var D="";var B=f.toLowerCase();var A=B.indexOf("sina.");if(A>0){D="sina.cn"}else{var C=B.indexOf(".");if(C>0){C=C+1}else{return""}A=B.indexOf("/",C);if(A<0){A=B.length}D=B.substring(C,A)}w=D;return D}function t(B){var C=document.cookie.indexOf(B+"=");if(-1==C){return""}C=document.cookie.indexOf("=",C)+1;var A=document.cookie.indexOf(";",C);if(0>=A){A=document.cookie.length}ckValue=document.cookie.substring(C,A);return ckValue}function o(D,B,A){if(B!=null){_suds_cmp_domainRoot=g();if(("undefined"==A)||(null==A)){document.cookie=D+"="+B+"; domain="+_suds_cmp_domainRoot+"; path=/"}else{var C=new Date();var E=C.getTime();E=E+86400000*A;C.setTime(E);E=C.getTime();document.cookie=D+"="+B+"; domain="+_suds_cmp_domainRoot+"; expires="+C.toUTCString()+"; path=/"}}}function v(){ckTmp=t(q);if(""==ckTmp){var A=new Date();ckTmp=Math.random()*10000000000000+"."+A.getTime();o(q,ckTmp)}return ckTmp}function n(){var B=Math.floor(Math.random()*100);if(B<l){window.suda=true;if(""==k){k=v(q)}if(""==e){e=t(x)}if(""==b){b=t(z)}try{if(!document.addEventListener){document.attachEvent("onclick",s);window.attachEvent("onload",m)}else{document.addEventListener("click",s,false);window.addEventListener("load",m,false)}}catch(A){}j=escape(c(window.document.referrer));f=escape(c(window.document.URL))}else{return 0}}function y(B,G,E){var F="";if(typeof sudaMapConfig.uId!="undefined"){F=sudaMapConfig.uId}if(typeof sudaMapConfig.addRequestTime!="undefined"){u=sudaMapConfig.addRequestTime}strSudsClickMapQuest=f+"|*|"+B+"|*|"+k+"|*|"+e+"|*|"+j+"|*|"+d+"|*|"+F+"|*|"+b;var C=h+"?"+strSudsClickMapQuest;var A=new Image();window.SUDAPIC=A;A.src=C;var D=G.toLocaleLowerCase();if(G&&D.indexOf("javascript:")==-1){setTimeout(function(){if(u){var J=new Date().getTime(),H="user"+J+Math.random().toString().slice(2),I=(G.indexOf("?")>-1)?"&":"?";G=G+I+"clicktime="+J+"&userid="+H}if(E=="_blank"){window.open(G)}else{location.href=G}},800)}}function r(D,B,A){for(var C=0;C<A;C++){if(!D.parentNode||D==document){return null}D=D.parentNode;if(B==D.tagName){break}}if(C>=A){return null}else{return D}}function s(Q){var Q=Q||event,J=Q.srcElement||Q.target;if(J==null&&J==document){return false}var M="",I="",C="",O="",F="";if("A"==J.tagName){M="txt";I=a(J.innerHTML);C=c(J.href);F=J.getAttribute("target");O=J}else{if("IMG"==J.tagName){M="img";I=J.alt;var H=r(J,"A",8);if(H){C=c(H.href);F=J.getAttribute("target");O=H}}else{M="txt";I=a(J.innerHTML);var H=r(J,"A",8);if(H){C=c(H.href);F=H.getAttribute("target");O=H}}}var K="",B=J.tagName,D="";try{for(i=0;i<10;i++){if(J==document){break}var R=J.getAttribute("data-sudaclick");if(R){K=R;var E=J.getElementsByTagName("A");for(var L=0;L<E.length;L++){if(E[L].innerHTML==O.innerHTML){D=L+1;break}}break}if(!J.parentNode){break}else{J=J.parentNode}}}catch(P){}if(K){if(C){Q.preventDefault()}if(I&&I.length>30){I=I.substr(0,30)}var A=new Date();var N=A.getTime();var G="t="+M+",s="+I+",h="+escape(C)+",ct="+N+",aid="+K+"-"+D+"|";y(G,C,F)}}function m(){p(window)}function p(D){var B=D.frames;for(var A=0;A<B.length;A++){try{if(B[A].location!=""){if(B[A].document!=null){if(!document.addEventListener){B[A].document.detachEvent("onclick",s);B[A].document.attachEvent("onclick",s)}else{B[A].document.removeEventListener("click",s,false);B[A].document.addEventListener("click",s,false)}p(B[A])}}}catch(C){}}}window.suda_init=window.suds_init=function(C,B){var A=arguments.length;if(A>0){d=C;l=B;if(typeof window.getUserInfo==="function"){window.getUserInfo(function(D){if(D&&D.uid){window.sudaMapConfig.uId=D.uid}n()},true)}else{n()}}};window.suda_count=window.suds_count=function(E){if(!E.name){return false}if(!E.type){E.type="btn"}if(!E.title){E.title=""}if(!E.index){E.index=0}if(!E.href){E.href=""}var C="",D="",B=new Date().getTime(),A="t="+E.type+",s="+E.title+",h="+escape(E.href)+",ct="+B+",aid="+E.name+"-"+E.index+"|";if(E.target==undefined){D=""}else{D=E.target}y(A,C,D)}})();
